import{C as ee,D as te,r as l,b as se,bJ as ne,j as e,bK as oe,s as re,e as ae,T as z,E as k,f as ie,m as le,H as J,a1 as ce,bs as ue,b6 as de,a2 as pe,B as me,O as he,I,J as w,K as xe}from"./main.js";import{u as ve}from"./useTools.js";import{I as fe}from"./Info.js";function be(s){return te("MuiInputAdornment",s)}const B=ee("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var H;const ge=(s,t)=>{const{ownerState:o}=s;return[t.root,t[`position${k(o.position)}`],o.disablePointerEvents===!0&&t.disablePointerEvents,t[o.variant]]},je=s=>{const{classes:t,disablePointerEvents:o,hiddenLabel:i,position:d,size:h,variant:x}=s,f={root:["root",o&&"disablePointerEvents",d&&`position${k(d)}`,x,i&&"hiddenLabel",h&&`size${k(h)}`]};return ie(f,be,t)},Ce=re("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ge})(le(({theme:s})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(s.vars||s).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${B.positionStart}&:not(.${B.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),ye=l.forwardRef(function(t,o){const i=se({props:t,name:"MuiInputAdornment"}),{children:d,className:h,component:x="div",disablePointerEvents:f=!1,disableTypography:y=!1,position:b,variant:g,...T}=i,p=ne()||{};let j=g;g&&p.variant,p&&!j&&(j=p.variant);const S={...i,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:f,position:b,variant:j},E=je(S);return e.jsx(oe.Provider,{value:null,children:e.jsx(Ce,{as:x,ownerState:S,className:ae(E.root,h),ref:o,...T,children:typeof d=="string"&&!y?e.jsx(z,{color:"textSecondary",children:d}):e.jsxs(l.Fragment,{children:[b==="start"?H||(H=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,d]})})})}),Se=J(e.jsx("path",{d:"m19 1-5 5v11l5-4.5zM1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6m22 13.5V6c-.6-.45-1.25-.75-2-1v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5v2c1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5z"}),"AutoStories"),Ie=J(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),we=s=>{let t=s;return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-zA-Z0-9_]/g,""),t=t.toLowerCase(),t},ze=(s,t)=>Math.round(s*10**t)/10**t,_=pe.debounce((s,t,o,i)=>{s(t,o,i)},250),Pe=({placeholder:s="",style:t={},snakeCase:o=!1,debounced:i=!0,multiline:d=!1,inputConfig:h,disabled:x=!1,shrink:f=!0,onBlur:y=()=>{},onMoreDetails:b,onRemove:g,dynamicLabel:T,decimals:p=2,allowZero:j=!0})=>{const S=ce(),{tool:E,id:K,tab:L}=l.useContext(ue),{selectStaticValue:O,selectEditValue:X,updateTool:M,validateToolField:V,selectErrorValue:Z}=ve(E,K),{label:A,type:P="text",tooltip:$,validateFn:m,keypath:c}=h,n=Z(c),q=X(c),F=O(c),[C,R]=l.useState(!1),[v,U]=l.useState(!0),[G,D]=l.useState(q??"");l.useEffect(()=>{C&&!n?U(!1):C&&n&&U(!0)},[C,n]);const N=l.useCallback(a=>{if(P==="number"){const r=ze(a.target.value,p);let u=j?r:Math.max(1,r);a.target.value=u,D(u);const Y=(m==null?void 0:m(u))||null;return{value:Number(u),error:Y}}else{const r=o?we(a.target.value):a.target.value;a.target.value=r,D(r);const u=(m==null?void 0:m(r))||null;return{value:r,error:u}}},[c,P,o,M,m,V]),W=l.useCallback((a,r)=>{M(c,a||" "),V(c,r),a!==F&&S(de({tabId:L.tabId,side:L.side,keypath:"viewState.isDirty",updates:!0}))},[c,F]),Q=l.useCallback(a=>{const{value:r,error:u}=N(a);i?_(W,r,u,{keypath:c}):W(r,u)},[i,N,c]);return e.jsx(me,{sx:{...t},children:e.jsx(he,{disabled:x,label:T||A,multiline:d,type:P,value:G,onChange:Q,placeholder:s,helperText:C?n:"",fullWidth:!0,margin:"normal",onFocus:()=>R(!0),onBlur:a=>{R(!0),y&&y(),i&&_.flush()},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:n?v?"warning.main":"secondary.main":"success.main"},"&:hover fieldset":{borderColor:n?v||n?"warning.main":"":"success.main"},"&.Mui-focused fieldset":{borderColor:n?v||n?"warning.main":"":"success.main"}},mb:2},slotProps:{inputLabel:{shrink:!!C||f,sx:{fontWeight:"bold",color:n&&v?"warning.main":"success.main","&.Mui-focused":{color:v?"warning.main":"success.main"}}},input:{endAdornment:e.jsxs(ye,{position:"end",children:[n?e.jsx(I,{title:e.jsx(e.Fragment,{children:n?e.jsx(z,{variant:"body2",children:n}):e.jsx(z,{variant:"body2",children:"This field needs correction"})}),arrow:!0,children:e.jsx(w,{children:e.jsx(Ie,{fontSize:"small",sx:{color:"warning.main"}})})}):null,$&&!x&&e.jsx(I,{title:e.jsx(e.Fragment,{children:e.jsx(z,{variant:"body2",children:$})}),arrow:!0,children:e.jsx(w,{children:e.jsx(fe,{fontSize:"small",sx:{cursor:"pointer",color:"secondary.main"}})})}),b&&e.jsx(I,{title:`Click for ${A} details`,arrow:!0,children:e.jsx(w,{onClick:b,sx:{color:"primary.main"},children:e.jsx(Se,{fontSize:"small"})})}),g&&e.jsx(I,{title:`Remove ${A}`,arrow:!0,children:e.jsx(w,{onClick:g,sx:{color:"warning.main"},children:e.jsx(xe,{fontSize:"small"})})})]})},formHelperText:{sx:{position:"absolute",bottom:"-20px",fontSize:"10px",color:v?"warning.main":"transparent",display:{xs:"none",xl:"block"}}}}})})};export{Pe as T};
