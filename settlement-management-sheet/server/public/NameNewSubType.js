import{aT as C,ag as m,bh as x,a3 as S,bi as v,aR as w,as as E,r as i,u as N,ah as R,aG as B,j as a,B as u,T as d,O as F,U as h,aH as I,V as T,a as b,bj as A}from"./main.js";async function M({subType:t,name:r}){return C.post("/glossary/subTypes/fork",{subType:t,name:r}).then(n=>n.data.createdSubType[0])}function W({subType:t,name:r}){return async(n,o)=>{try{const s=await M({subType:t,name:r}).then(l=>l);n(x({subType:s}))}catch(s){console.error("Error forking SubType:",s),n(S({message:"Error forking SubType. Try again later.",type:"error",duration:3e3}))}}}function L({subType:t,name:r}){return m(W({subType:t,name:r}))}function O({subType:t}){return async(r,n)=>{try{const s=n().subType.edit;r(x({subType:{...t,groups:[]}})),s[t.id]||await v({subType:t}).then(l=>{})}catch(o){console.error("Error adding SubType:",o),r(S({message:"Error adding SubType. Try again later.",type:"error",duration:3e3}))}}}function P({subType:t}){return m(O({subType:t}))}const G=()=>{const{openRelay:t}=w({id:"create-new-subtype"}),{getPropertyLabel:r}=E(),[n,o]=i.useState(""),[s,l]=i.useState("continent"),[c,g]=i.useState(null),{closeModal:y}=N(),p=R(B),f=()=>{t({data:{cancel:!0},status:"complete"})},j=()=>{if(c){const e=p.find(k=>k.name===c);e&&(L({subType:e,name:n}),y())}else{const{subType:e}=A(n,s);P({subType:e}),y()}};return a.jsxs(u,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[a.jsx(d,{variant:"h6",gutterBottom:!0,sx:{width:"100%",textAlign:"center"},children:"Name New Sub-Type"}),a.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[a.jsx(F,{value:n,onChange:e=>o(e.target.value),placeholder:"Enter sub-type name",fullWidth:!0}),a.jsx(h,{value:s||"",onChange:e=>l(e.target.value),displayEmpty:!0,fullWidth:!0,children:I.map(e=>a.jsx(T,{value:e,children:r(e).label},e))})]}),a.jsxs(u,{sx:{display:"flex",justifyContent:"start",alignItems:"center",mt:2,gap:2},children:[a.jsx(d,{variant:"body1",color:"textSecondary",sx:{width:"25%"},children:"Clone From:"}),a.jsx(h,{value:c||"",onChange:e=>g(e.target.value),displayEmpty:!0,fullWidth:!0,children:p.map(e=>a.jsx(T,{value:e.name,children:e.name},e.id))})]}),a.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:4},children:[a.jsx(b,{variant:"contained",color:"primary",onClick:j,children:"Create Sub-Type"}),a.jsx(b,{variant:"outlined",color:"secondary",onClick:f,children:"Cancel"})]})]})};export{G as default};
