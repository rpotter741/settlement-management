import{n as T,r as i,j as e,B as o,a4 as K,a as y,a5 as v,O as k,J as S,a6 as w,Y as A,a7 as B,a8 as P,T as b,a1 as D,k as E,v as L}from"./main.js";import{l as N}from"./loadTool.js";import{d as j,a as C,m as h}from"./mergeObjects.js";const R=[{id:"kit",name:"Kit"},{id:"settlement",name:"Settlement"},{id:"both",name:"Both"}],I={category:"category",attribute:"attribute",region:"region",location:"location",people:"person"},Y=({obj:a,keypath:s})=>{const l=D();return!a||!a.leads?null:Array.isArray(a.leads)?e.jsx(o,{sx:{display:"flex",gap:1},children:a.leads.map((c,x)=>e.jsxs(S,{size:"small",sx:{fontSize:"0.75rem",color:"primary.contrastText",backgroundColor:d=>E(d.palette.secondary.main,1)},onClick:()=>{l(N({tool:I[s],id:a.id[x],refId:a.refId[0],currentTool:I[s]}))},children:[" ",`[${c}]`]},L()))}):e.jsxs(b,{children:[" ",`[${a.leads}]`]})},m=(a,s,l)=>{const[n,c]=i.useState(!1),x=()=>{c(!n)};return!a||!s||!a[s]?null:e.jsxs(o,{sx:{my:2},children:[e.jsx(A,{children:e.jsx(B,{label:l.toUpperCase(),sx:{color:"white",cursor:"pointer",width:"150px",bgcolor:"primary.main"},onClick:()=>x()})}),e.jsx(P,{in:n,sx:{py:1},children:a[s].length>0?a[s].map((d,f)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,px:1,py:.5,backgroundColor:f%2===0?"dividerDark":"background.default"},children:[e.jsxs(b,{textAlign:"start",children:[" ",d.name]}),e.jsx(Y,{obj:d,keypath:s})]},d.refId)):e.jsx(o,{children:e.jsxs(b,{textAlign:"start",children:[" - No ",l]})})})]},s)},J=({})=>{const{setOptions:a}=T(),[s,l]=i.useState(j),[n,c]=i.useState(C),[x,d]=i.useState([j]),[f,z]=i.useState([C]),[r,O]=i.useState("both"),[u,g]=i.useState([]);return i.useEffect(()=>{g(r==="kit"?h(s,{}):r==="settlement"?h({},n):h(s,n))},[r,s,n]),i.useEffect(()=>{a(h(s,n))},[s,n]),e.jsxs(o,{sx:{height:"100%",overflowY:"scroll",mt:1},children:[e.jsx(K,{variant:"outlined","aria-label":"outlined button group",sx:{mb:2},children:R.map(t=>e.jsx(y,{onClick:()=>{O(t.id)},variant:r===t.id?"contained":"outlined",sx:{backgroundColor:r===t.id?"success.dark":"divider",color:r===t.id?"white":"secondary.light",borderColor:r===t.id?"success.dark":"honey.dark"},children:t.name},t.id))}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",px:1},children:[e.jsx(v,{sx:{mt:2,width:"100%"},value:s,disablePortal:!0,id:"kit-select",options:[...x,{name:"-Create New Kit-"}],getOptionLabel:t=>t.name,renderInput:t=>e.jsx(k,{...t,label:"Select a Kit"}),onChange:(t,p)=>{l(p||j)}}),e.jsx(S,{sx:{mt:2},children:e.jsx(w,{})})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",px:1},children:[e.jsx(v,{sx:{mt:2,width:"100%"},value:n,disablePortal:!0,id:"settlement-select",options:[...f,{name:"-Create New Settlement-"}],getOptionLabel:t=>t.name,renderInput:t=>e.jsx(k,{...t,label:"Select a Settlement"}),onChange:(t,p)=>{c(p||C)}}),e.jsx(S,{sx:{mt:2},children:e.jsx(w,{})})]}),e.jsxs(o,{sx:{overflowY:"scroll"},children:[m(u,"attribute","Attributes"),m(u,"category","Categories"),m(u,"region","Regions"),m(u,"location","Locations"),m(u,"people","People")]})]})};export{J as default};
