import{u as C,a as j,b as f,c as S,j as t,B as c,T as d,d as i,e as T,s as b,f as B,t as k}from"./main.js";const u=["apt","action","attribute","building","category","event","gameStatus","kit","listener","settlementType","settlement","storyThread","tradeHub","upgrade"],F=({tab:s})=>{const l=C(),{removeById:h}=j(),{closeModal:a}=f(),{tool:e,id:o,side:v,name:m,tabId:g}=s,r=()=>{h(s.tabId,s.side,!1)},{edit:n}=e&&u.includes(e)?S(e,o):{edit:null},x=async()=>{if(!(!e||!n)&&u.includes(e))try{await T.saveTool({tool:e,data:n}),r(),a()}catch{localStorage.setItem(`${e}-${o}`,JSON.stringify(n)),a(),l(b({message:`Failed to save ${m} to database. Try again later.`,type:"error"}));return}},p=()=>{a()},y=()=>{l(B({tool:e,id:o,tabId:g,side:v,validationFields:k[s.tabType][e].validationFields||[]})),a(),r()};return t.jsxs(c,{sx:{p:2,textAlign:"center",minWidth:500},children:[t.jsx(d,{variant:"h6",gutterBottom:!0,children:"Unsaved Changes"}),t.jsxs(d,{variant:"body1",gutterBottom:!0,children:["You have unsaved changes. Close ",t.jsx("strong",{children:s.name})," without saving?"]}),t.jsxs(c,{sx:{mt:2},children:[t.jsx(i,{variant:"outlined",color:"success",onClick:x,children:"Save and Close"}),t.jsx(i,{variant:"outlined",color:"info",onClick:p,sx:{ml:2},children:"Cancel"}),t.jsx(i,{variant:"outlined",color:"error",onClick:y,sx:{ml:2},children:"Close Without Saving"})]})]})};export{F as default};
