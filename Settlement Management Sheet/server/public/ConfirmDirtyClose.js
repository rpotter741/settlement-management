import{u as y,a as f,b as j,c as S,j as t,B as c,T as d,d as l,e as b,s as T,f as B,t as k}from"./main.js";const u=["apt","action","attribute","building","category","event","gameStatus","kit","listener","settlementType","settlement","storyThread","tradeHub","upgrade"],F=({tab:s})=>{const i=y(),{removeById:h}=f(),{closeModal:o}=j(),{tool:e,id:a,side:m,name:g,tabId:v}=s,r=()=>{h(s.tabId,s.side,!1)},{edit:n}=e&&u.includes(e)?S(e,a):{edit:null},x=async()=>{if(!(!e||!n)&&u.includes(e))try{await b.saveTool({tool:e,data:n}),r(),o()}catch{localStorage.setItem(`${e}-${a}`,JSON.stringify(n)),o(),i(T({message:`Failed to save ${g} to database. Try again later.`,type:"error"}));return}},C=()=>{o()},p=()=>{i(B({tool:e,id:a,tabId:v,side:m,validationFields:k[e].validationFields})),console.log("before modal content"),o(),console.log("after modal content"),r()};return t.jsxs(c,{sx:{p:2,textAlign:"center",minWidth:500},children:[t.jsx(d,{variant:"h6",gutterBottom:!0,children:"Unsaved Changes"}),t.jsxs(d,{variant:"body1",gutterBottom:!0,children:["You have unsaved changes. Close ",t.jsx("strong",{children:s.name})," without saving?"]}),t.jsxs(c,{sx:{mt:2},children:[t.jsx(l,{variant:"outlined",color:"success",onClick:x,children:"Save and Close"}),t.jsx(l,{variant:"outlined",color:"info",onClick:C,sx:{ml:2},children:"Cancel"}),t.jsx(l,{variant:"outlined",color:"error",onClick:p,sx:{ml:2},children:"Close Without Saving"})]})]})};export{F as default};
