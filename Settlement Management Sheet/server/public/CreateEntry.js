import{b as $,z as I,av as V,aw as ee,k as u,x as U,ax as te,e as ae,ay as le,az as re,j as l,aa as O,l as S,u as F,A as _,aA as T,E as W,aB as J,a9 as ne,a1 as se,m as K,ab as oe,ap as ie,T as z,B as R,g as q,aC as ce,aD as pe,aE as ue,aF as de}from"./main.js";import{P as Y,S as me,a as w}from"./PageBox.js";import{u as ye}from"./useTabSplit.js";import{T as he}from"./TabbedContent.js";import{C as be,g as fe}from"./getPropertyLabel.js";import{E as ge,t as Q,a as xe,f as ve,u as ke,b as Ce}from"./extensions.js";import{A as Se}from"./TagTable.js";const je=(t,a)=>{try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error("Error getting local storage item:",e),a??null}},Te=(t,a)=>{try{localStorage.setItem(t,JSON.stringify(a))}catch(e){console.error("Error setting local storage item:",e)}},Ee=t=>{try{localStorage.removeItem(t)}catch(a){console.error("Error removing local storage item:",a)}},Le=t=>({get:a=>je(t,a),set:a=>Te(t,a),remove:()=>Ee(t)}),G=(t,a)=>{const e=$(),s=I(V(t,a)),d=I(ee(t,a)),b=u.useCallback((n,y)=>e(U.getOptionsByProperty({glossaryId:t,entryId:a,property:n,inheritanceMap:y})),[t,a]),p=n=>I(te(t,a,n)),m=Le(`${t}-${a}`),g=u.useCallback(n=>{console.log("updating node ",s," with content: ",n)},[e,t,s]),f=u.useCallback(()=>m.get(),[t,a]),x=u.useCallback(n=>{m.set(n)},[t,a]),o=u.useCallback(()=>{m.remove()},[t,a]),v=u.useCallback(()=>{const n=m.get();if(!n)return!1;const y=new Date((d==null?void 0:d.updatedAt)||0);return new Date(n.updatedAt)>y},[t,a]);return u.useEffect(()=>{!d&&(s!=null&&s.entryType)&&e(U.getEntryById({node:s}))},[e,a,t,s.entryType,d]),{node:s,entry:d,buildOptionsByKeypath:b,getOptionsByKeypath:p,updateGlossaryEntry:g,getLocalStorage:f,setLocalStorage:x,clearLocalStorage:o,localIsNewer:v}},Ae=({tab:t,editComponent:a,editComponentProps:e,previewComponent:s,previewComponentProps:d})=>{const b=$(),{showModal:p,closeModal:m}=ae(),{tool:g,id:f,mode:x,side:o,tabId:v,glossaryId:n,tabType:y}=t,k=j=>{const C=S.cloneDeep(t.viewState.lastSaved||{});C[j]=new Date().toISOString(),b(F({tabId:v,side:o,keypath:"viewState.lastUpdated",updates:C}))};if(!n)return null;const{node:E,entry:P}=G(n,f),B=I(le(n)),M=u.useMemo(()=>re({node:E,nodeStructure:B}),[E,B]),{splitSize:c,soloSize:r,splitTabs:i}=ye(),h=u.useMemo(()=>({tab:t,tool:g,id:f,mode:x,side:o,tabId:v,glossaryId:n,entry:P,node:E,inheritanceMap:M,updateLastSaved:k,showModal:p,closeModal:m}),[t,g,f,x,o,v,n,P,k,p,m,E,M]);return P?l.jsx(me.Provider,{value:h,children:l.jsx(Y,{variant:i?c?"default":"blend":r?"blend":"default",tabType:"glossary",mode:x,children:x==="edit"&&a?O.createElement(a,{...e}):x==="preview"&&s?O.createElement(s,{...d}):l.jsx("div",{style:{padding:"16px"},children:"Yo shit is busted, bruh"})})}):l.jsx(Y,{mode:x,variant:"default",children:"Loading..."})},L=t=>t,we=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climate"},{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"regions",label:"Regions"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),Pe=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climates",hasPrimary:!0},{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"landmarks",label:"Landmarks"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations",hasPrimary:!0},{multiple:!0,keypath:"factions",label:"Factions",hasPrimary:!1},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"resources",label:"Resources"}]}]),Me=L([{name:"Government",children:[{multiple:!0,keypath:"capital",label:"Capital"},{multiple:!1,keypath:"governmentType",label:"Government Type"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"notableFigures",label:"Notable Figures"},{multiple:!1,keypath:"culture",label:"Culture"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"languages",label:"Languages"},{multiple:!1,keypath:"economy",label:"Economy"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"Geography",children:[{multiple:!0,keypath:"continent",label:"Continents"},{multiple:!0,keypath:"regions",label:"Regions"},{multiple:!0,keypath:"geography",label:"Landmarks"}]},{name:"History",children:[{multiple:!1,keypath:"history",label:"History"},{multiple:!0,keypath:"notableEvents",label:"Notable Events"},{multiple:!0,keypath:"flags",label:"Flags"}]}]),Oe=L([{name:"Geography",children:[{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"landmarks",label:"Landmarks"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"resources",label:"Resources"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"people",label:"People"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),Re=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climate"},{multiple:!0,keypath:"regions",label:"Region",hasPrimary:!0},{multiple:!1,keypath:"geographicType",label:"Type"}]},{name:"Notes",children:[{multiple:!1,keypath:"notes",label:"Notes"}]}]),Ge=L([{name:"Geopolitical",children:[{multiple:!0,keypath:"nation",label:"Nation"},{multiple:!0,keypath:"region",label:"Region"},{multiple:!1,keypath:"population",label:"Population"}]},{name:"Government",children:[{multiple:!1,keypath:"government",label:"Government"},{multiple:!1,keypath:"type",label:"Settlement Type"},{multiple:!1,keypath:"economy",label:"Economy"},{multiple:!1,keypath:"culture",label:"Culture"},{multiple:!0,keypath:"people",label:"Notable Figures"}]},{name:"History",children:[{multiple:!0,keypath:"events",label:"Notable Events"},{multiple:!0,keypath:"locations",label:"Notable Locations"},{multiple:!1,keypath:"history",label:"History"}]}]),Be=L([{name:"Roster",children:[{multiple:!0,keypath:"leader",label:"Leader"},{multiple:!0,keypath:"homeBase",label:"Home Base"},{multiple:!0,keypath:"members",label:"Members"}]},{name:"Geopolitical",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"regions",label:"Regions"}]},{name:"Relationships",children:[{multiple:!0,keypath:"allies",label:"Allies"},{multiple:!0,keypath:"enemies",label:"Enemies"}]}]),Ne=L([{name:"Profession",children:[{multiple:!1,keypath:"occupation",label:"Occupation"},{multiple:!1,keypath:"title",label:"Title"}]},{name:"Background",children:[{multiple:!0,keypath:"traits",label:"Traits"},{multiple:!0,keypath:"faction",label:"Faction"},{multiple:!1,keypath:"history",label:"History"}]},{name:"Details",children:[{multiple:!0,keypath:"location",label:"Location"},{multiple:!1,keypath:"appearance",label:"Appearance"},{multiple:!1,keypath:"events",label:"Events"}]}]),ze=L([{name:"Details",children:[{multiple:!1,keypath:"locationType",label:"Type"},{multiple:!0,keypath:"currentOccupants",label:"Current Occupants"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),De=L([{name:"Details",children:[{multiple:!1,keypath:"type",label:"Type"},{multiple:!1,keypath:"priority",label:"Priority"},{multiple:!1,keypath:"dueDate",label:"Due Date"},{multiple:!0,keypath:"sharedWith",label:"Shared With"}]}]),Ie=L([{name:"Details",children:[{multiple:!1,keypath:"significance",label:"Significance"},{multiple:!1,keypath:"gameDate",label:"Game Date"},{multiple:!0,keypath:"location",label:"Location"},{multiple:!1,keypath:"frequency",label:"Frequency"}]},{name:"Related",children:[{multiple:!0,keypath:"relatedEntries",label:"Related Entries"}]}]),Fe={continent:we,territory:Pe,domain:Me,province:Oe,landmark:Re,settlement:Ge,faction:Be,person:Ne,location:ze,note:De,event:Ie},He=({multiple:t=!0,label:a,keypath:e,alphabetizeOptions:s=!0,hasPrimary:d=!1,placeholder:b})=>{const{glossaryId:p,id:m,inheritanceMap:g}=w();if(!p)return null;const{entry:f,updateGlossaryEntry:x,getOptionsByKeypath:o,buildOptionsByKeypath:v}=G(p,m),n=o(e);console.log(n),u.useEffect(()=>{n||v(e,g)},[e,n]);const[y,k]=O.useState(d?"Aymaq":""),E=O.useRef(null);function P(r,i){const h=new Map,j={inherited:1,nearby:2,extended:3,other:4};for(const C of Object.keys(j))for(const A of r[C]??[]){const H=(Array.isArray(A[i]),A[i]);if(H)for(const N of H)if(h.has(N)){const D=h.get(N);D.sources.push({id:A.id,name:A.name,relationship:C});const X=j[C],Z=j[D.group];console.log(X,Z,"tier and existingTier"),j[C]<j[D.group]&&(console.log("Updating group for",N,"from",D.group,"to",C),D.group=C)}else h.set(N,{value:N,label:N,group:C,sources:[{id:A.id,name:A.name,relationship:C}]})}return[...h.values()].map(C=>({...C,label:S.capitalize(C.label),group:S.capitalize(C.group)}))}const B=u.useMemo(()=>n?Object.entries(n).flatMap(([r,i])=>i.filter(h=>!!h[e]).map(h=>({label:S.capitalize(h[e]),value:h[e],group:S.capitalize(r),meta:{id:h.id,name:h.name}}))):[],[n,e]),M=r=>{var h;Array.isArray(r)&&(d&&(r.includes(y)||(r=[y,...r])),r=r.map(j=>j.trim().toLowerCase()));const i={[e]:r};x(i),t&&((h=E.current)==null||h.focus())};console.log(B,"displayOptions"),console.log(f[e],"entry[keypath]");const c=n?P(n,e):[];return console.log(c,"deduped options"),l.jsx(_,{freeSolo:!0,disablePortal:!0,multiple:t,options:c,groupBy:r=>r.group,value:Array.isArray(f[e])?f[e].map(r=>({label:S.capitalize(r)})):f[e]?{label:S.capitalize(f[e])}:[],disableCloseOnSelect:t,onChange:(r,i)=>{i===null?M(t?[]:""):Array.isArray(i)?M(i.map(h=>h.label)):M([i.label])},renderInput:r=>l.jsx(K,{...r,inputRef:E,label:a,variant:"outlined",fullWidth:!0,slotProps:{inputLabel:{shrink:!0}}}),renderTags:(r,i)=>r.map((h,j)=>u.createElement(ne,{label:h,...i({index:j}),key:h.value,sx:{mr:.5,mb:.5,backgroundColor:C=>se(C.palette.primary.main,C.palette.mode==="dark"?.5:.9),color:"primary.contrastText"}})),blurOnSelect:!t,getOptionLabel:r=>{var i;return((i=r[0])==null?void 0:i.label)||""},renderOption:(r,i,{selected:h})=>{const j=i.value===y,A=h&&!j;return u.createElement(T,{component:"li",...r,key:i.value,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative"}},l.jsxs(T,{children:[t&&d&&l.jsx(W,{title:j?`This is the current primary ${e}.`:A?`Make ${i} the primary ${e}`:"",children:l.jsx("span",{children:l.jsx(J,{checked:j,disabled:!A&&!j,onClick:H=>H.stopPropagation(),onChange:()=>k(i),disableRipple:!0,tabIndex:-1,sx:{mr:1}})})}),S.capitalize(i.label)]}))}})};function $e(t){return[...t].sort((a,e)=>a.localeCompare(e))}const Ue=({multiple:t=!0,label:a,keypath:e,options:s,alphabetizeOptions:d=!0,hasPrimary:b=!1,placeholder:p})=>{const{glossaryId:m,id:g}=w();if(!m)return null;const[f,x]=O.useState(""),{entry:o,updateGlossaryEntry:v}=G(m,g),[n,y]=O.useState(b?"Aymaq":""),k=O.useRef(null),E=u.useMemo(()=>{let c=s.filter(r=>o[e]?Array.isArray(o[e])?!o[e].some(i=>i.toLowerCase()===r.toLowerCase()):o[e].toLowerCase()!==r.toLowerCase():!0);return d?$e(c).map(r=>r):c.map(r=>S.capitalize(r))},[s]),P=u.useMemo(()=>{if(!o[e])return[];const c=Array.isArray(o[e])?o[e]:[o[e]];return[n,...c.filter(r=>r.toLowerCase()!==n)]},[o,e,n]),B=c=>{var r;if(t){const i={[e]:[...Array.isArray(o[e])?o[e]:o[e]?[o[e]]:[],c].flat()};v(i),t&&((r=k.current)==null||r.focus());return}else{const i={[e]:c};v(i)}},M=c=>{let r=[];Array.isArray(o[e])?r=o[e]:typeof o[e]=="string"&&(r=[o[e]]);const i=r.filter(h=>h.toLowerCase()!==c.toLowerCase());v({[e]:i})};return l.jsxs(T,{sx:{display:"flex",flexDirection:"column",width:"100%",my:2},children:[l.jsx(_,{options:E,freeSolo:!0,disableCloseOnSelect:!0,value:null,inputValue:f,blurOnSelect:!1,clearOnBlur:!0,onInputChange:(c,r)=>x(r),onChange:(c,r)=>{r&&B(r),x(""),setTimeout(()=>{var i;return(i=k.current)==null?void 0:i.focus()})},renderInput:c=>l.jsx(K,{...c,inputRef:k,placeholder:`Search for ${e}â€¦`,variant:"outlined",fullWidth:!0}),clearOnEscape:!0,selectOnFocus:!0,handleHomeEndKeys:!0,getOptionLabel:c=>S.capitalize(c),renderOption:(c,r)=>u.createElement(T,{component:"li",...c,key:r,sx:{px:1}},S.capitalize(r))}),l.jsx(T,{children:t?P.length>0?l.jsx(T,{sx:{display:"flex",flexDirection:"column",gap:.5,mt:1},children:P.map((c,r)=>l.jsxs(T,{sx:{display:"flex",alignItems:"center",justifyContent:"start",width:"100%",position:"relative"},children:[l.jsx(oe,{onClick:()=>M(c),disabled:n===c.toLowerCase(),children:l.jsx(ie,{sx:{color:n===c.toLowerCase()?"transparent":"inherit"}})}),b&&l.jsx(W,{title:`Click to set ${c} as primary`,placement:"auto",children:l.jsx(J,{checked:n===c.toLowerCase(),onChange:()=>{n!==c&&y(c.toLowerCase())},disabled:n===c.toLowerCase(),sx:{mr:2}})}),l.jsx(z,{children:S.capitalize(c)})]},c))}):l.jsxs(T,{sx:{textAlign:"left",mt:1,ml:4,color:"text.secondary",fontStyle:"italic"},children:["No ",e," selected"]}):l.jsx(T,{sx:{mt:1,color:"text.secondary",fontStyle:"italic"},children:o[e]?`Selected: ${S.capitalize(o[e])}`:`No ${e} selected`})})]})},We=({propertyMap:t})=>{const{glossaryId:a,id:e}=w();return G(a,e),l.jsx(l.Fragment,{children:t.map(s=>s.multiple?l.jsx(Ue,{multiple:!0,keypath:s.keypath,options:[],label:s.label},s.keypath):l.jsx(He,{multiple:!1,keypath:s.keypath,options:[],label:s.label},s.keypath))})},Ke=({label:t,value:a,onSave:e,style:s={}})=>{const[d,b]=u.useState(a),[p,m]=u.useState(!1),g=d!==a;u.useEffect(()=>{b(a)},[a]);const f=()=>{e(d)},x=o=>{b(o.target.value)};return l.jsxs(R,{sx:{display:"flex",alignItems:"center",gap:2,...s},children:[l.jsx(K,{label:t,variant:"outlined",value:d,onChange:x,disabled:!p,fullWidth:!0,slotProps:{input:{endAdornment:p?l.jsx(be,{sx:{color:g?"error.main":"transparent",fontSize:".75rem"}}):null}}}),l.jsx(q,{variant:"contained",onClick:()=>{p&&f(),m(!p),p&&g&&b(a)},children:p?"Save":"Edit"}),l.jsx(q,{variant:"outlined",disabled:!p,onClick:()=>{b(a),m(!1)},children:"Cancel"})]})},qe=S.debounce((t,a,e)=>{t({description:a,dataString:e.trim()})},1e3),Ye=S.debounce((t,a)=>{t(a)},1e3),_e=({keypath:t,minHeight:a="300px",maxHeight:e="1015px",style:s={}})=>{var v,n;ce();const{entry:d,tab:b,updateLastSaved:p}=w(),{updateGlossaryEntry:m}=G(b.glossaryId,b.id),g=((n=(v=b==null?void 0:b.viewState)==null?void 0:v.lastUpdated)==null?void 0:n[t])||null,[f,x]=u.useState(d[t]||""),o=(y,k)=>{qe(m,y,k),Ye(p,t)};return l.jsxs(R,{sx:{display:"flex",flexDirection:"column",boxSizing:"border-box",border:"1px solid",borderColor:"divider"},children:[l.jsx(R,{className:"shell-editor",sx:{boxSizing:"border-box",display:"flex",flexDirection:"column",position:"relative",minHeight:a,maxHeight:e,overflowY:"scroll",height:"100%",...s},children:l.jsx(ge,{slotBefore:l.jsx(xe,{}),extensions:Q,content:f,onUpdate:y=>{const k=y.editor.getHTML(),E=y.editor.getText();x(k),o(k,E)}})}),g&&l.jsxs(z,{variant:"caption",sx:{width:"100%",backgroundColor:y=>y.palette.mode==="dark"?"secondary.main":"secondary.light",borderTop:"1px solid",borderColor:"divider",color:y=>y.palette.mode==="dark"?"text.primary":"secondary.contrastText"},children:["Last Saved: ",ve(g)]})]})},Je=()=>{const{glossaryId:t,id:a,tabId:e,side:s,mode:d}=w(),{updateGlossaryEntry:b,node:p}=G(t,a),m=$(),[g,f]=u.useState(p.name||""),x=u.useRef(!1);u.useEffect(()=>{g!==p.name&&(x.current=!0,b({name:g}),m(F({tabId:e,side:s,keypath:"name",updates:g})))},[g,m,e,s]),u.useEffect(()=>{if(x.current){x.current=!1;return}g!==p.name&&(f(p.name),m(F({tabId:e,side:s,keypath:"name",updates:p.name})))},[p.name]);const o=v=>{f(v),m(F({tabId:e,side:s,keypath:"name",updates:v})),m(U.renameNodeAndEntry({node:p}))};return l.jsxs(l.Fragment,{children:[l.jsx(Ke,{label:"Entry Title",value:g,onSave:o,style:{width:"100%",mb:2}}),l.jsx(_e,{keypath:"description",maxHeight:"500px"}),l.jsx(Se,{})]})},Qe={Overview:Je},Xe=[{name:"Overview",key:"overview",disabled:!1,props:{keypath:"description"}},{name:"Backlinks",key:"backlinks",disabled:!1,props:{propertyMap:[]}}],Ze=({propertyMap:t})=>{var o,v;const a=$(),{tab:e}=w(),s=I(pe(e.glossaryId)),[d,b]=u.useState(((o=e==null?void 0:e.viewState)==null?void 0:o.activeTab)||"Overview"),[p,m]=u.useState(((v=e==null?void 0:e.viewState)==null?void 0:v.activeIndex)||0),g=u.useMemo(()=>e.side==="right"?"secondary":"primary",[e.side]);u.useEffect(()=>()=>{const n={...e.viewState,activeTab:d,activeIndex:p};a(F({tabId:e.tabId,side:e.side,keypath:"viewState",updates:n}))},[d,p]);const f=u.useMemo(()=>{const n=t.map(k=>({name:fe({glossary:s,section:k.name.toLowerCase(),key:`${S.capitalize(k.name)} Name`}),key:k.name,disabled:!1,props:{propertyMap:k.children}}));return Xe.toSpliced(1,0,...n)},[t,s.integrationState]),x=u.useMemo(()=>f.reduce((n,y)=>(n[y.name]=Qe[y.name]||We||(()=>null),n),{}),[f]);return l.jsx(he,{tabs:f,componentMap:x,activeTab:d,handleTabClick:(n,y)=>{b(n),m(y)},lastIndex:p,color:g})},Ve=({height:t="100%"})=>{const{glossaryId:a,id:e,mode:s,side:d}=w(),{node:b}=G(a,e);return l.jsx(Ze,{propertyMap:Fe[b.entryType]})},et=({content:t})=>{const a=ke({extensions:Q,content:t,editable:!1});return l.jsx(T,{sx:{width:"100%",maxHeight:"calc(100vh - 200px)",overflowY:"auto",borderRadius:2},children:l.jsx(Ce,{editor:a})})},tt=({keypath:t,header:a})=>{const{entry:e}=w();return l.jsxs(R,{sx:{display:"flex",justifyContent:"start",alignItems:"start",mt:2,width:"100%",flexDirection:"column"},children:[l.jsx(z,{sx:{fontSize:"1.25rem",width:"100%",borderBottom:"1px solid",borderColor:"divider",textAlign:"left",fontWeight:600},children:a}),l.jsx(z,{sx:{fontSize:"1.1rem",width:"100%",textAlign:"left",ml:2},children:Array.isArray(e[t])?e[t].map(s=>S.capitalize(s)).join(", "):S.capitalize(e[t])||"No data available"})]})},at={nations:"Nations",regions:"Regions",locations:"Locations",resources:"Resources",population:"Population",climate:"Climate",terrain:"Terrain",capital:"Capital",languages:"Languages",persons:"Persons",eventLog:"Event Log",geography:"Geography",type:"Type",region:"Regions",landmark:"Landmark",settlement:"Settlement",faction:"Faction",person:"Person",event:"Event",note:"Note"},lt=({keypathArray:t})=>l.jsxs(R,{sx:{width:"100%",p:2,borderLeft:"1px solid",borderColor:"divider"},children:[l.jsx(R,{sx:{width:"100%",display:"flex",justifyContent:"start",alignItems:"center",borderBottom:"1px solid",borderColor:"primary.main",flexWrap:"wrap"},children:ue.map(a=>{const e=(Math.random()*(10*Math.random())).toFixed(0),s=e==="1"?"Backlink":"Backlinks";return Number(e)<1?null:l.jsx(W,{title:`${e} ${S.capitalize(a)} ${s}`,children:l.jsxs(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1,cursor:"pointer"},children:[de[a],l.jsxs(z,{variant:"body2",sx:{mt:.5},children:["(",e,")"]})]})},a)})}),t.map(a=>l.jsx(tt,{keypath:a,header:at[a]},a))]}),rt={continent:["nations","regions","locations","resources","population","climate","terrain"],territory:[],domain:["continent","regions","capital","population","languages","persons","eventLog","locations","geography"],province:[],landmark:["region","climate","type"],settlement:[],faction:[],location:["terrain","climate","type","region"],person:[],event:[],note:[]},nt=()=>{const{entry:t,node:a}=w(),{entryType:e}=a;return l.jsxs(T,{sx:{display:"grid",height:"100%",width:"100%",gridTemplateColumns:"2fr 1fr"},children:[l.jsxs(T,{sx:{width:"100%",py:2,borderColor:"divider",display:"flex",flexDirection:"column"},children:[l.jsx(z,{variant:"h2",sx:{mb:2},children:t.name}),l.jsx(et,{content:t.description})]}),l.jsx(lt,{keypathArray:rt[e]})]})},mt=({tab:t})=>l.jsx(Ae,{tab:t,editComponent:Ve,editComponentProps:{},previewComponent:nt,previewComponentProps:{}});export{mt as default};
