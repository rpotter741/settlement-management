import{F as y,j as a,a0 as j,aa as C,au as M,ar as k,h as b,r as h,av as A,aw as D,as as N,at as T,M as H,T as S,p as B,W as w,I as z,ax as L}from"./main.js";import{t as u}from"./glossaryThunks.js";const P=y(a.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),K=y(a.jsx("path",{d:"M20 9H4v2h16zM4 15h16v-2H4z"}),"DragHandle"),q=({glossary:l,glossaries:i,glossaryId:e,setGlossary:r})=>{const n=j(),s=C(M(e||"")),{showModal:m}=k(),{addNewTab:f}=b();return h.useEffect(()=>{n(u.getGlossaries())},[]),h.useEffect(()=>{if(i.length>0&&e===null){const t=localStorage.getItem("lastActiveGlossaryId");t&&n(A({glossaryId:t}))}},[i,e]),h.useEffect(()=>{if(i.length===0&&l!==null)r(null);else if(e!==null){const t=i.find(c=>c.id===e);t&&(l==null?void 0:l.id)!==t.id&&r(t)}},[e,i]),h.useEffect(()=>{e!==null&&s.length===0&&n(u.getNodes({glossaryId:e}))},[e]),{handleSelect:t=>{t!==e&&(n(A({glossaryId:t})),r(t))},handleAddFolder:({id:t,name:c,parentId:p,entryType:v})=>{if(!e)return;const E={id:t,name:c,fileType:"section",parentId:p,glossaryId:e,entryType:v,children:[]};n(u.createNodeAndSection({node:E}))},handleDelete:t=>{if(t===null||e===null)return;m({entry:{componentKey:"ConfirmDeleteEntry",props:{node:t,glossaryId:e},id:"confirm-delete-entry"}})},handleRename:t=>{t!==null&&e!==null&&(console.log("updating names...",t),n(u.renameNodeAndEntry({node:t})))},handleAddEntry:({id:t,parentId:c,entryType:p})=>{if(p===null||e===null)return;const v={id:t,name:"Untitled",entryType:p,fileType:"detail",parentId:c,glossaryId:e};n(u.createNodeAndDetail({node:v}))},handleSettingsClick:()=>{l===null||e===null||f({name:l==null?void 0:l.name,glossaryId:e,id:e,mode:"edit",tabType:"glossary",tool:"editGlossary",preventSplit:!1,activate:!0,side:"left",disableMenu:!0})},deselectGlossary:()=>{e!==null&&(n(D({config:"glossary",key:"activeTab",value:"Overview"})),r(null),n(A({glossaryId:null})),localStorage.removeItem("lastActiveGlossaryId"))}}},J=({handleSelect:l})=>{const{showModal:i}=k(),{getAlphaColor:e}=N(),{glossaries:r,activeId:n}=T(),[s,m]=h.useState(null),f=o=>({id:"confirm-delete-glossary",componentKey:"ConfirmDeleteGlossary",props:{glossary:o,tab:{side:null}}}),G=()=>({id:"create-glossary",componentKey:"NameNewGlossary",props:{}}),x=e({color:"success",key:"main",opacity:.2});return a.jsxs(H,{className:"someshit",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},sx:{flex:1,height:"calc(100vh - 40px)"},children:[a.jsx(S,{variant:"h6",children:"Glossary Select"}),a.jsx(B,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start",gap:2},children:r.map((o,d)=>a.jsxs(w,{variant:"text",sx:{textTransform:"none",color:"text.primary",width:"100%",gap:1,backgroundColor:n===o.id?x:"inherit","&:hover":{backgroundColor:s===d?x:"inherit",cursor:"pointer"}},onClick:()=>l(o.id),onMouseEnter:()=>m(d),onMouseLeave:()=>m(null),children:[a.jsx(K,{sx:{color:s===d?"primary.main":"transparent"}}),a.jsx(S,{variant:"body2",sx:{fontWeight:"bold",textAlign:"left",width:"100%"},children:o.name}),a.jsx(z,{size:"small",onClick:()=>{i({entry:f(o)})},sx:{color:s===d?"primary.main":"transparent"},children:a.jsx(L,{fontSize:"small"})})]},o.id))}),a.jsx(w,{sx:{bottom:0,variant:"contained",width:"100%"},onClick:()=>{i({entry:G()})},children:"Create New Glossary"})]})};export{P as A,J as G,q as u};
