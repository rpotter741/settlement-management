import{k as y,r as o,j as e,B as g,n as j,l as v,u as f,b as E,g as w,d as S,v as C,o as T,p as D}from"./main.js";import{E as N,t as k,a as B}from"./extensions.js";import{G as M}from"./GenreSelect.js";import"./useTabSplit.js";const A=v.debounce((r,a,i)=>{r({description:a,dataString:i.trim()})},1e3),F=({html:r="",minHeight:a="300px",maxHeight:i="1000px",propUpdate:c=d=>{}})=>{const d=y(),[p,x]=o.useState(r||""),l=(n,s)=>{A(c,n,s)};return e.jsx(g,{children:e.jsx(g,{sx:{boxShadow:2,border:`2px solid ${j(d.palette.divider,.05)}`,boxSizing:"border-box",position:"relative",minHeight:a,maxHeight:i,overflowY:"auto",borderRadius:2},children:e.jsx(N,{slotBefore:e.jsx(B,{}),extensions:k,content:p,onUpdate:n=>{const s=n.editor.getHTML(),m=n.editor.getText();x(s),l(s,m)}})})})},P=()=>{const r=f(),[a,i]=o.useState(""),[c,d]=o.useState(""),[p,x]=o.useState(""),[l,n]=o.useState("Fantasy"),[s,m]=o.useState(""),[U,L]=o.useState(""),{closeModal:h}=E(),b=t=>{d(t.description),x(t.dataString)};return e.jsxs(g,{sx:{width:"50vw"},children:[e.jsx(w,{value:a,onChange:t=>i(t.target.value),label:"Glossary Name",variant:"outlined",fullWidth:!0,margin:"normal"}),e.jsx(M,{defaultGenre:l,defaultSubGenre:s,updateFn:(t,u)=>{t==="genre"?n(u):t==="subGenre"&&m(u)}}),e.jsx(F,{propUpdate:b,html:c}),e.jsx(S,{variant:"contained",color:"primary",onClick:async()=>{const t=C(),u=await T.createGlossary({id:t,name:a.trim(),description:{markdown:c,string:p},genre:l,subGenre:s}).then(G=>(console.log("Glossary created:",G.glossary),G.glossary));h(),r(D({...u}))},children:"Create Glossary"}),e.jsx(S,{variant:"outlined",color:"secondary",onClick:()=>h(),style:{marginLeft:"8px"},children:"Cancel"})]})};export{P as default};
