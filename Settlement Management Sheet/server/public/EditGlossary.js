import{u as S,p as f,aG as v,aH as g,r as a,aI as u,j as t,aB as j,g as T,aD as C,n as w,b as G,aJ as E,B as I,d as B}from"./main.js";import{P as k}from"./PageBox.js";import{T as z}from"./TabbedContent.js";import{E as P}from"./Editor.js";import{u as M}from"./useTabSplit.js";import"./extensions.js";const O=()=>{const o=S(),s=f(v());if(!s)return null;const e=f(g(s)),[n,d]=a.useState((e==null?void 0:e.name)||""),[h,x]=a.useState((e==null?void 0:e.description.markdown)||""),[c,p]=a.useState(!1),[i,m]=a.useState(!1);a.useEffect(()=>{i?o(u({id:s,isDirty:!0})):i||o(u({id:s,isDirty:!1}))},[i,o]),a.useEffect(()=>{e.name!==n?m(!0):m(!1)},[e.name,n]);const y=({description:r,dataString:b})=>{try{o(w.updateGlossary({id:e.id,updates:{description:{markdown:r,string:b}}})),p(!1),x(r),i||o(u({id:s,isDirty:!1}))}catch(l){console.error("Error updating glossary:",l)}};return a.useEffect(()=>{c&&o(u({id:s,isDirty:!0}))},[c]),t.jsxs(j,{sx:{p:2,height:"100%",boxSizing:"border-box"},children:[t.jsx(T,{label:"Glossary Name",variant:"outlined",fullWidth:!0,margin:"normal",value:n,onChange:r=>d(r.target.value),slotProps:{input:{endAdornment:t.jsx(C,{sx:{color:i?"error.main":"transparent",fontSize:".75rem"}})}}}),t.jsx(P,{html:e.description.markdown,propUpdate:y,immediateOnChange:()=>p(!0)})]})},H=({tab:o})=>{const s=f(v());if(console.log("activeId",s,o),!s)return null;const e=f(g(s)),{showModal:n}=G(),[d,h]=a.useState("Overview"),[x,c]=a.useState(0),p=(l,D)=>{h(l),c(D)},i=[{name:"Overview",props:{}},{name:"Terms",props:{}},{name:"Settings",props:{}},{name:"Palette",props:{}}],m=a.useMemo(()=>({Overview:()=>t.jsx(O,{}),Terms:()=>t.jsx("div",{children:"Terms Component"}),Settings:()=>t.jsx("div",{children:"Settings Component"}),Palette:()=>t.jsx(E,{column:!1})}),[]),{splitSize:y,soloSize:r,splitTabs:b}=M();return t.jsx(k,{mode:"edit",variant:b?y?"default":"blend":r?"blend":"default",children:t.jsxs(I,{sx:{display:"flex",flexDirection:"column",flexGrow:1,mt:2,alignContent:"start",justifyContent:"start",gap:2,height:"100%",borderRadius:2,boxSizing:"border-box",overflowY:"scroll",width:"100%",px:2},children:[t.jsx(z,{tabs:i,componentMap:m,activeTab:d,handleTabClick:p,lastIndex:x,isTool:!1}),t.jsx(B,{onClick:()=>{const l={componentKey:"ConfirmDeleteGlossary",props:{tab:d,glossary:e},id:`delete-glossary-${e.id}`};n({entry:l})},children:"Delete Glossary"})]})})};export{H as default};
