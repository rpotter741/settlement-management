import{w as u,aO as k,aP as O,u as A,r as t,b as B,aQ as M,aR as N,aS as f,j as s,d as x,aT as R,B as b,g as D,aJ as j,aD as z}from"./main.js";import{P as W}from"./PageBox.js";import{T as F}from"./TabbedContent.js";import"./useTabSplit.js";const H=()=>{const n=u(k());if(!n)return;const e=u(O(n)),r=A(),[o,y]=t.useState((e==null?void 0:e.name)||""),[l,v]=t.useState((e==null?void 0:e.description)||""),[c,d]=t.useState(!1),[p,m]=t.useState(!1),[J,K]=t.useState(!1),{showModal:S}=B(),i=u(M(n));u(N),t.useEffect(()=>{(c||p)&&!i?r(f({id:n,isDirty:!0})):!c&&!p&&i&&r(f({id:n,isDirty:!1}))},[c,p,i,n,r]),t.useEffect(()=>{e.name!==o?d(!0):d(!1)},[e.name,o]),t.useEffect(()=>{e.description!==l?m(!0):m(!1)},[e.description,l]);const C=()=>{try{r(z.updateGlossaryThunk({id:e.id,name:o,description:l})),d(!1),m(!1),r(f({id:n,isDirty:!1}))}catch(a){console.error("Error updating glossary:",a)}},[h,T]=t.useState("Overview"),[g,P]=t.useState(0),G=(a,E)=>{T(a),P(E)},I=[{name:"Overview",props:{}},{name:"Terms",props:{}},{name:"Settings",props:{}},{name:"Palette",props:{}}],w={Overview:()=>s.jsxs(b,{sx:{p:2},children:[s.jsx(D,{label:"Glossary Name",variant:"outlined",fullWidth:!0,margin:"normal",value:o,onChange:a=>y(a.target.value),slotProps:{input:{endAdornment:s.jsx(j,{sx:{color:c?"error.main":"transparent",fontSize:".75rem"}})}}}),s.jsx(D,{label:"Description",variant:"outlined",fullWidth:!0,margin:"normal",value:l,onChange:a=>v(a.target.value),multiline:!0,minRows:6,slotProps:{input:{endAdornment:s.jsx(j,{sx:{color:p?"error.main":"transparent",fontSize:".75rem"}})}}}),s.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",my:2},children:[s.jsx(x,{disabled:!i,variant:"contained",color:"success",onClick:C,sx:{opacity:i?1:0},children:"Save Changes"}),s.jsx(x,{variant:"outlined",disabled:!i,onClick:()=>{y(e.name),v(e.description),d(!1),m(!1),r(f({id:n,isDirty:!1}))},sx:{opacity:i?1:0},children:"Reset"})]})]}),Terms:()=>s.jsx("div",{children:"Terms Component"}),Settings:()=>s.jsx("div",{children:"Settings Component"}),Palette:()=>s.jsx(R,{column:!1})};return s.jsxs(W,{innerStyle:{border:"1px solid",borderColor:"primary.main"},mode:"edit",children:[s.jsx(F,{tabs:I,componentMap:w,activeTab:h,handleTabClick:G,lastIndex:g,isTool:!1}),s.jsx(x,{onClick:()=>{const a={componentKey:"ConfirmDeleteGlossary",props:{tab:h,glossary:e},id:`delete-glossary-${e.id}`};S({entry:a})},children:"Delete Glossary"})]})};export{H as default};
