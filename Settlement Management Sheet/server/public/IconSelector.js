import{R as v,r as u,j as h,B as w,o as A,d as k,u as F,p as G,q as J,T as z,w as Q,x as U}from"./main.js";import{I as L,C as Z}from"./Icon.js";import{i as $}from"./iconList.js";function M(){return(M=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function q(e,n){if(e==null)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n.indexOf(t=a[o])>=0||(r[t]=e[t]);return r}function S(e){var n=u.useRef(e),t=u.useRef(function(o){n.current&&n.current(o)});return n.current=e,t.current}var E=function(e,n,t){return n===void 0&&(n=0),t===void 0&&(t=1),e>t?t:e<n?n:e},j=function(e){return"touches"in e},N=function(e){return e&&e.ownerDocument.defaultView||self},O=function(e,n,t){var o=e.getBoundingClientRect(),r=j(n)?function(a,l){for(var c=0;c<a.length;c++)if(a[c].identifier===l)return a[c];return a[0]}(n.touches,t):n;return{left:E((r.pageX-(o.left+N(e).pageXOffset))/o.width),top:E((r.pageY-(o.top+N(e).pageYOffset))/o.height)}},T=function(e){!j(e)&&e.preventDefault()},X=v.memo(function(e){var n=e.onMove,t=e.onKey,o=q(e,["onMove","onKey"]),r=u.useRef(null),a=S(n),l=S(t),c=u.useRef(null),d=u.useRef(!1),i=u.useMemo(function(){var g=function(s){T(s),(j(s)?s.touches.length>0:s.buttons>0)&&r.current?a(O(r.current,s,c.current)):C(!1)},B=function(){return C(!1)};function C(s){var f=d.current,b=N(r.current),y=s?b.addEventListener:b.removeEventListener;y(f?"touchmove":"mousemove",g),y(f?"touchend":"mouseup",B)}return[function(s){var f=s.nativeEvent,b=r.current;if(b&&(T(f),!function(V,W){return W&&!j(V)}(f,d.current)&&b)){if(j(f)){d.current=!0;var y=f.changedTouches||[];y.length&&(c.current=y[0].identifier)}b.focus(),a(O(b,f,c.current)),C(!0)}},function(s){var f=s.which||s.keyCode;f<37||f>40||(s.preventDefault(),l({left:f===39?.05:f===37?-.05:0,top:f===40?.05:f===38?-.05:0}))},C]},[l,a]),m=i[0],x=i[1],_=i[2];return u.useEffect(function(){return _},[_]),v.createElement("div",M({},o,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:r,onKeyDown:x,tabIndex:0,role:"slider"}))}),H=function(e){return e.filter(Boolean).join(" ")},Y=function(e){var n=e.color,t=e.left,o=e.top,r=o===void 0?.5:o,a=H(["react-colorful__pointer",e.className]);return v.createElement("div",{className:a,style:{top:100*r+"%",left:100*t+"%"}},v.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},p=function(e,n,t){return n===void 0&&(n=0),t===void 0&&(t=Math.pow(10,n)),Math.round(t*e)/t},ee=function(e){return ae(R(e))},R=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?p(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?p(parseInt(e.substring(6,8),16)/255,2):1}},ne=function(e){return re(oe(e))},te=function(e){var n=e.s,t=e.v,o=e.a,r=(200-n)*t/100;return{h:p(e.h),s:p(r>0&&r<200?n*t/100/(r<=100?r:200-r)*100:0),l:p(r/2),a:p(o,2)}},D=function(e){var n=te(e);return"hsl("+n.h+", "+n.s+"%, "+n.l+"%)"},oe=function(e){var n=e.h,t=e.s,o=e.v,r=e.a;n=n/360*6,t/=100,o/=100;var a=Math.floor(n),l=o*(1-t),c=o*(1-(n-a)*t),d=o*(1-(1-n+a)*t),i=a%6;return{r:p(255*[o,c,l,l,d,o][i]),g:p(255*[d,o,o,c,l,l][i]),b:p(255*[l,l,d,o,o,c][i]),a:p(r,2)}},I=function(e){var n=e.toString(16);return n.length<2?"0"+n:n},re=function(e){var n=e.r,t=e.g,o=e.b,r=e.a,a=r<1?I(p(255*r)):"";return"#"+I(n)+I(t)+I(o)+a},ae=function(e){var n=e.r,t=e.g,o=e.b,r=e.a,a=Math.max(n,t,o),l=a-Math.min(n,t,o),c=l?a===n?(t-o)/l:a===t?2+(o-n)/l:4+(n-t)/l:0;return{h:p(60*(c<0?c+6:c)),s:p(a?l/a*100:0),v:p(a/255*100),a:r}},ce=v.memo(function(e){var n=e.hue,t=e.onChange,o=H(["react-colorful__hue",e.className]);return v.createElement("div",{className:o},v.createElement(X,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:E(n+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":p(n),"aria-valuemax":"360","aria-valuemin":"0"},v.createElement(Y,{className:"react-colorful__hue-pointer",left:n/360,color:D({h:n,s:100,v:100,a:1})})))}),le=v.memo(function(e){var n=e.hsva,t=e.onChange,o={backgroundColor:D({h:n.h,s:100,v:100,a:1})};return v.createElement("div",{className:"react-colorful__saturation",style:o},v.createElement(X,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:E(n.s+100*r.left,0,100),v:E(n.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+p(n.s)+"%, Brightness "+p(n.v)+"%"},v.createElement(Y,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:D(n)})))}),P=function(e,n){if(e===n)return!0;for(var t in e)if(e[t]!==n[t])return!1;return!0},se=function(e,n){return e.toLowerCase()===n.toLowerCase()||P(R(e),R(n))};function ie(e,n,t){var o=S(t),r=u.useState(function(){return e.toHsva(n)}),a=r[0],l=r[1],c=u.useRef({color:n,hsva:a});u.useEffect(function(){if(!e.equal(n,c.current.color)){var i=e.toHsva(n);c.current={hsva:i,color:n},l(i)}},[n,e]),u.useEffect(function(){var i;P(a,c.current.hsva)||e.equal(i=e.fromHsva(a),c.current.color)||(c.current={hsva:a,color:i},o(i))},[a,e,o]);var d=u.useCallback(function(i){l(function(m){return Object.assign({},m,i)})},[]);return[a,d]}var ue=typeof window<"u"?u.useLayoutEffect:u.useEffect,fe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},K=new Map,de=function(e){ue(function(){var n=e.current?e.current.ownerDocument:document;if(n!==void 0&&!K.has(n)){var t=n.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,K.set(n,t);var o=fe();o&&t.setAttribute("nonce",o),n.head.appendChild(t)}},[])},he=function(e){var n=e.className,t=e.colorModel,o=e.color,r=o===void 0?t.defaultColor:o,a=e.onChange,l=q(e,["className","colorModel","color","onChange"]),c=u.useRef(null);de(c);var d=ie(t,r,a),i=d[0],m=d[1],x=H(["react-colorful",n]);return v.createElement("div",M({},l,{ref:c,className:x}),v.createElement(le,{hsva:i,onChange:m}),v.createElement(ce,{hue:i.h,onChange:m,className:"react-colorful__last-control"}))},pe={defaultColor:"000",toHsva:ee,fromHsva:function(e){return ne({h:e.h,s:e.s,v:e.v,a:1})},equal:se},ve=function(e){return v.createElement(he,M({},e,{colorModel:pe}))};const ge=({onChange:e,sourceColor:n="#000",onBackgroundChange:t=()=>{},bgColor:o="light"})=>{const[r,a]=u.useState(n),[l,c]=u.useState(o),[d,i]=u.useState("icon"),m=g=>{c(g),t(g)},x=g=>{a(g),e(g)},_=g=>{d==="icon"?x(g):m(g)};return h.jsxs(w,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[h.jsxs(A,{variant:"outlined","aria-label":"outlined button group",sx:{mb:1},children:[h.jsx(k,{onClick:()=>i("icon"),color:"primary",variant:d==="icon"?"contained":"outlined",children:"Icon"}),h.jsx(k,{onClick:()=>i("background"),color:"secondary",variant:d==="background"?"contained":"outlined",children:"Background"})]}),h.jsx(ve,{color:r,onChange:_})]})},_e=({tool:e,id:n})=>{const t=F(),o=G(J(e,n)),[r,a]=u.useState(o.icon),[l,c]=u.useState(o.icon.color),[d,i]=u.useState(o.icon.backgroundColor||"#fbf7ef"),m=(s,f)=>{a(f)},x=s=>{i(s)},_=s=>{c(s)},g=()=>{t(Q({}))},B=()=>{const s={...r,color:l,backgroundColor:d};t(U({id:n,tool:e,keypath:"icon",updates:s})),g()},C=u.useMemo(()=>[...$].sort((s,f)=>s.name.localeCompare(f.name)),[]);return h.jsxs(w,{sx:{display:"grid",gap:1,gridTemplateColumns:"repeat(6, 1fr)",width:"100%",minWidth:["100%",800]},children:[h.jsxs(w,{sx:{my:2,display:"flex",alignItems:"center",justifyContent:"space-around",gap:1,gridColumn:"span 6"},children:[h.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:1,flexDirection:"column"},children:[h.jsx(z,{children:"Selected Icon:"}),h.jsx(L,{viewBox:r.viewBox,path:r.d,size:48,color:l,backgroundColor:d})]}),h.jsx(ge,{sourceColor:l,onChange:_,onBackgroundChange:x})]}),C.map((s,f)=>s.name!==r.name&&h.jsx(Z,{sx:{display:"flex",justifyContent:"center"},children:h.jsxs(k,{onClick:()=>m(null,s),sx:{display:"flex",justifyContent:"center",width:["60px","80px","100px"],height:["60px","80px","100px"],position:"relative"},children:[h.jsx(L,{viewBox:s.viewBox,path:s.d,size:48,color:l}),h.jsx(z,{variant:"caption",sx:{position:"absolute",bottom:0,display:{xs:"none",md:"block"}},children:s.name})]})},f)),h.jsxs(w,{sx:{gridColumn:"span 6",display:"flex",justifyContent:"center"},children:[h.jsx(k,{variant:"outlined",sx:{width:"50%",mt:2},onClick:g,children:"Cancel"}),h.jsx(k,{variant:"contained",sx:{width:"50%",mt:2},onClick:B,children:"Confirm"})]})]})};export{_e as default};
