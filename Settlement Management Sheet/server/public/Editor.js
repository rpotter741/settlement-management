import{k as t,aC as T,j as r,B as c,a1 as g,T as j,l as u}from"./main.js";import{f as x,E as w,t as C,a as B}from"./extensions.js";function L(e,o){const s=t.useRef(e);t.useEffect(()=>{s.current=e},[e]),t.useEffect(()=>{const i=setInterval(()=>s.current(),o);return()=>clearInterval(i)},[o])}const k=u.debounce((e,o,s)=>{e({description:o,dataString:s.trim()})},1e3),y=u.debounce(e=>{e(new Date)},1e3),D=({html:e="",minHeight:o="300px",maxHeight:s="1000px",propUpdate:i=()=>{},immediateOnChange:p=()=>{}})=>{const f=T(),[m,b]=t.useState(e||""),[n,h]=t.useState(null),[v,l]=t.useState(""),E=(a,d)=>{p(),k(i,a,d),y(h)};return t.useEffect(()=>{l(x(n||new Date))},[n]),L(()=>{n&&l(x(n))},1e4),r.jsxs(c,{children:[r.jsx(c,{className:"non-shell-editor",sx:{boxShadow:2,border:`2px solid ${g(f.palette.divider,.05)}`,boxSizing:"border-box",position:"relative",minHeight:o,maxHeight:s,overflowY:"auto",borderRadius:"4px 4px 0 0",borderBottom:0},children:r.jsx(w,{slotBefore:r.jsx(B,{}),extensions:C,content:m,onUpdate:a=>{const d=a.editor.getHTML(),S=a.editor.getText();b(d),E(d,S)}})}),r.jsx(c,{sx:{width:"100%",display:"flex"},children:n&&r.jsxs(j,{variant:"caption",sx:{width:"100%",backgroundColor:a=>a.palette.mode==="dark"?"secondary.main":"background.default",borderTop:"1px solid",borderColor:"divider"},children:["Last Saved: ",v]})})]})};export{D as E};
