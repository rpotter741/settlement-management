import{r as t,ab as T,j as a,B as c,_ as g,T as j,l as u}from"./main.js";import{f as x,E as w,t as C,a as B}from"./extensions.js";function L(e,o){const s=t.useRef(e);t.useEffect(()=>{s.current=e},[e]),t.useEffect(()=>{const i=setInterval(()=>s.current(),o);return()=>clearInterval(i)},[o])}const y=u.debounce((e,o,s)=>{e({description:o,dataString:s.trim()})},1e3),I=u.debounce(e=>{e(new Date)},1e3),D=({html:e="",minHeight:o="300px",maxHeight:s="1000px",propUpdate:i=()=>{},immediateOnChange:p=()=>{}})=>{const f=T(),[m,b]=t.useState(e||""),[n,h]=t.useState(null),[v,l]=t.useState(""),E=(r,d)=>{p(),y(i,r,d),I(h)};return t.useEffect(()=>{l(x(n||new Date))},[n]),L(()=>{n&&l(x(n))},1e4),a.jsxs(c,{children:[a.jsx(c,{className:"non-shell-editor",sx:{boxShadow:2,border:`2px solid ${g(f.palette.divider,.05)}`,boxSizing:"border-box",position:"relative",minHeight:o,maxHeight:s,overflowY:"auto",borderRadius:"4px 4px 0 0",borderBottom:0},children:a.jsx(w,{slotBefore:a.jsx(B,{}),extensions:C,content:m,onUpdate:r=>{const d=r.editor.getHTML(),S=r.editor.getText();b(d),E(d,S)}})}),a.jsx(c,{sx:{width:"100%",display:"flex"},children:n&&a.jsxs(j,{variant:"caption",sx:{width:"100%",backgroundColor:r=>r.palette.mode==="dark"?"secondary.main":"background.default",borderTop:"1px solid",borderColor:"divider"},children:["Last Saved: ",v]})})]})};export{D as E};
