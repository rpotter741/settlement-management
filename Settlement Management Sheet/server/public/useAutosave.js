import{k as e}from"./main.js";import{u as f}from"./useSharedHooks.js";function l({name:n,batchSaveFn:u,intervalMs:a=6e4}){const r=e.useRef(!1);e.useRef({});const{snackbar:o}=f().utils,s=e.useCallback(async t=>{r.current||(r.current=!0,await u(),t&&console.log(`Flushing autosave for ${n}`),r.current=!1)},[u,o]);e.useEffect(()=>{const t=setInterval(()=>s(!1),a);return()=>clearInterval(t)},[s,a]),e.useEffect(()=>()=>{r.current||s(!0)},[])}export{l as u};
