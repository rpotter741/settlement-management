import{h as T,r as i,j as e,i as o,a3 as O,W as y,a4 as v,K as k,I as S,a5 as I,X as A,a6 as P,a7 as B,T as b,a0 as D,f as E,v as L}from"./main.js";import{l as N}from"./loadTool.js";import{d as j,a as C,m as h}from"./mergeObjects.js";const R=[{id:"kit",name:"Kit"},{id:"settlement",name:"Settlement"},{id:"both",name:"Both"}],w={category:"category",attribute:"attribute",region:"region",location:"location",people:"person"},z=({obj:n,keypath:s})=>{const l=D();return!n||!n.leads?null:Array.isArray(n.leads)?e.jsx(o,{sx:{display:"flex",gap:1},children:n.leads.map((c,x)=>e.jsxs(S,{size:"small",sx:{fontSize:"0.75rem",color:"primary.contrastText",backgroundColor:d=>E(d.palette.secondary.main,1)},onClick:()=>{l(N({tool:w[s],id:n.id[x],refId:n.refId[0],currentTool:w[s]}))},children:[" ",`[${c}]`]},L()))}):e.jsxs(b,{children:[" ",`[${n.leads}]`]})},m=(n,s,l)=>{const[a,c]=i.useState(!1),x=()=>{c(!a)};return!n||!s||!n[s]?null:e.jsxs(o,{sx:{my:2},children:[e.jsx(A,{children:e.jsx(P,{label:l.toUpperCase(),sx:{color:"white",cursor:"pointer",width:"150px",bgcolor:"primary.main"},onClick:()=>x()})}),e.jsx(B,{in:a,sx:{py:1},children:n[s].length>0?n[s].map((d,f)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,px:1,py:.5,backgroundColor:f%2===0?"dividerDark":"background.default"},children:[e.jsxs(b,{textAlign:"start",children:[" ",d.name]}),e.jsx(z,{obj:d,keypath:s})]},d.refId)):e.jsx(o,{children:e.jsxs(b,{textAlign:"start",children:[" - No ",l]})})})]},s)},U=({})=>{const{setOptions:n}=T(),[s,l]=i.useState(j),[a,c]=i.useState(C),[x,d]=i.useState([j]),[f,Y]=i.useState([C]),[r,K]=i.useState("both"),[u,g]=i.useState([]);return i.useEffect(()=>{g(r==="kit"?h(s,{}):r==="settlement"?h({},a):h(s,a))},[r,s,a]),i.useEffect(()=>{n(h(s,a))},[s,a]),e.jsxs(o,{sx:{height:"100%",overflowY:"scroll",mt:1},children:[e.jsx(O,{variant:"outlined","aria-label":"outlined button group",sx:{mb:2},children:R.map(t=>e.jsx(y,{onClick:()=>{K(t.id)},variant:r===t.id?"contained":"outlined",sx:{backgroundColor:r===t.id?"success.dark":"divider",color:r===t.id?"white":"secondary.light",borderColor:r===t.id?"success.dark":"honey.dark"},children:t.name},t.id))}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",px:1},children:[e.jsx(v,{sx:{mt:2,width:"100%"},value:s,disablePortal:!0,id:"kit-select",options:[...x,{name:"-Create New Kit-"}],getOptionLabel:t=>t.name,renderInput:t=>e.jsx(k,{...t,label:"Select a Kit"}),onChange:(t,p)=>{l(p||j)}}),e.jsx(S,{sx:{mt:2},children:e.jsx(I,{})})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",px:1},children:[e.jsx(v,{sx:{mt:2,width:"100%"},value:a,disablePortal:!0,id:"settlement-select",options:[...f,{name:"-Create New Settlement-"}],getOptionLabel:t=>t.name,renderInput:t=>e.jsx(k,{...t,label:"Select a Settlement"}),onChange:(t,p)=>{c(p||C)}}),e.jsx(S,{sx:{mt:2},children:e.jsx(I,{})})]}),e.jsxs(o,{sx:{overflowY:"scroll"},children:[m(u,"attribute","Attributes"),m(u,"category","Categories"),m(u,"region","Regions"),m(u,"location","Locations"),m(u,"people","People")]})]})};export{U as default};
