import{F as M,G as B,r as b,H as A,I as N,J as C,K as H,j as t,L as T,M as D,N as R,S as se,O as W,P as oe,Q as ae,U as ne,V as re,W as X,X as ie,v as I,c as F,B as u,T as v,d as Y,y as E,Y as le,Z as ce,A as de,g as pe,_ as j,$ as ue,R as J,a0 as he,a1 as ge,a2 as O,a3 as y,a as me,a4 as $}from"./main.js";import{i as ve}from"./iconList.js";import{u as z,S as be}from"./ShellContext.js";import{I as Q}from"./Icon.js";import{T as S,I as xe}from"./ToolInput.js";import{u as fe,O as we,R as L,P as ye}from"./ThresholdPreview.js";import{C as Ce}from"./CreateToolShell.js";import"./PageBox.js";function je(e){return B("MuiSwitch",e)}const f=M("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Te=e=>{const{classes:o,edge:n,size:a,color:s,checked:r,disabled:l}=e,i={root:["root",n&&`edge${T(n)}`,`size${T(a)}`],switchBase:["switchBase",`color${T(s)}`,r&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},p=D(i,je,o);return{...o,...p}},Se=C("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.root,n.edge&&o[`edge${T(n.edge)}`],o[`size${T(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${f.thumb}`]:{width:16,height:16},[`& .${f.switchBase}`]:{padding:4,[`&.${f.checked}`]:{transform:"translateX(16px)"}}}}]}),ke=C(se,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.switchBase,{[`& .${f.input}`]:o.input},n.color!=="default"&&o[`color${T(n.color)}`]]}})(R(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${f.checked}`]:{transform:"translateX(20px)"},[`&.${f.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${f.checked} + .${f.track}`]:{opacity:.5},[`&.${f.disabled} + .${f.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${f.input}`]:{left:"-100%",width:"300%"}})),R(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:W(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(oe(["light"])).map(([o])=>({props:{color:o},style:{[`&.${f.checked}`]:{color:(e.vars||e).palette[o].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:W(e.palette[o].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${f.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${o}DisabledColor`]:`${e.palette.mode==="light"?ae(e.palette[o].main,.62):ne(e.palette[o].main,.55)}`}},[`&.${f.checked} + .${f.track}`]:{backgroundColor:(e.vars||e).palette[o].main}}}))]}))),Pe=C("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,o)=>o.track})(R(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),Re=C("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,o)=>o.thumb})(R(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),q=b.forwardRef(function(o,n){const a=A({props:o,name:"MuiSwitch"}),{className:s,color:r="primary",edge:l=!1,size:i="medium",sx:p,slots:g={},slotProps:d={},...w}=a,m={...a,color:r,edge:l,size:i},c=Te(m),h={slots:g,slotProps:d},[x,k]=N("root",{className:H(c.root,s),elementType:Se,externalForwardedProps:h,ownerState:m,additionalProps:{sx:p}}),[Z,_]=N("thumb",{className:c.thumb,elementType:Re,externalForwardedProps:h,ownerState:m}),U=t.jsx(Z,{..._}),[ee,te]=N("track",{className:c.track,elementType:Pe,externalForwardedProps:h,ownerState:m});return t.jsxs(x,{...k,children:[t.jsx(ke,{type:"checkbox",icon:U,checkedIcon:U,ref:n,ownerState:m,...w,classes:{...c,root:c.switchBase},slots:{...g.switchBase&&{root:g.switchBase},...g.input&&{input:g.input}},slotProps:{...d.switchBase&&{root:typeof d.switchBase=="function"?d.switchBase(m):d.switchBase},...d.input&&{input:typeof d.input=="function"?d.input(m):d.input}}}),t.jsx(ee,{...te})]})});function Ee(e){return B("MuiTable",e)}M("MuiTable",["root","stickyHeader"]);const Ie=e=>{const{classes:o,stickyHeader:n}=e;return D({root:["root",n&&"stickyHeader"]},Ee,o)},$e=C("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.root,n.stickyHeader&&o.stickyHeader]}})(R(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),V="table",Le=b.forwardRef(function(o,n){const a=A({props:o,name:"MuiTable"}),{className:s,component:r=V,padding:l="normal",size:i="medium",stickyHeader:p=!1,...g}=a,d={...a,component:r,padding:l,size:i,stickyHeader:p},w=Ie(d),m=b.useMemo(()=>({padding:l,size:i,stickyHeader:p}),[l,i,p]);return t.jsx(re.Provider,{value:m,children:t.jsx($e,{as:r,role:r===V?null:"table",ref:n,className:H(w.root,s),ownerState:d,...g})})});function Me(e){return B("MuiTableBody",e)}M("MuiTableBody",["root"]);const Be=e=>{const{classes:o}=e;return D({root:["root"]},Me,o)},Ae=C("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,o)=>o.root})({display:"table-row-group"}),He={variant:"body"},G="tbody",De=b.forwardRef(function(o,n){const a=A({props:o,name:"MuiTableBody"}),{className:s,component:r=G,...l}=a,i={...a,component:r},p=Be(i);return t.jsx(X.Provider,{value:He,children:t.jsx(Ae,{className:H(p.root,s),as:r,ref:n,role:r===G?null:"rowgroup",ownerState:i,...l})})});function Fe(e){return B("MuiTableHead",e)}M("MuiTableHead",["root"]);const ze=e=>{const{classes:o}=e;return D({root:["root"]},Fe,o)},Ne=C("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,o)=>o.root})({display:"table-header-group"}),Oe={variant:"head"},K="thead",qe=b.forwardRef(function(o,n){const a=A({props:o,name:"MuiTableHead"}),{className:s,component:r=K,...l}=a,i={...a,component:r},p=ze(i);return t.jsx(X.Provider,{value:Oe,children:t.jsx(Ne,{as:r,className:H(p.root,s),ref:n,role:r===K?null:"rowgroup",ownerState:i,...l})})}),Ue=ie(t.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");function We(){const e=[9,29,49,69,84,99,100],o={data:{},order:[]};o.order=e.map(s=>{const r=I();return o.data[r]={name:"",max:s},r});const n={data:{},order:[]},a=I();return n.data[a]={name:"default",value:1},n.order=[a],{id:I(),refId:I(),version:1,positive:!0,name:"",description:"",balance:{maxPerLevel:0,healthPerLevel:0,costPerLevel:0},thresholds:o,settlementPointCost:n,icon:{...ve[0],color:"black",backgroundColor:"#fbf7ef"},tags:[],isValid:!1,status:"DRAFT",createdBy:""}}const P={name:{label:"Attribute Name",type:"text",tooltip:"The unique name of the attribute. This should clearly convey the attribute's purpose and role within the settlement mechanics.",validateFn:e=>e?e.length<3?"Attribute name must be at least 3 characters long":null:"Attribute name is required",keypath:"name"},costPerLevel:{label:"Currency Cost Per Level",type:"number",tooltip:"The amount of currency required per level to acquire this attribute. This cost scales with the settlement's level.",validateFn:e=>e?e<=0?"Cost per level must be greater than 0":null:"Cost per level is required",keypath:"balance.costPerLevel"},healthPerLevel:{label:"Health Drain Per Level",type:"number",tooltip:"This value represents the health damage the settlement takes for each missing unit of this attribute, scaled by settlement level.",validateFn:e=>e==null?"Health per level is required":e<0?"Health per level cannot be negative":null,keypath:"balance.healthPerLevel"},maxPerLevel:{label:"Max Per Level",type:"number",tooltip:"The maximum number of units of this attribute that can provide benefits to the settlement per level.",validateFn:e=>e?e<=0?"Max per level must be greater than 0":e>10?"Max per level cannot be greater than 10":null:"Max per level is required",keypath:"balance.maxPerLevel"},description:{label:"Description",type:"textarea",tooltip:"A brief explanation of the attribute's purpose and impact. This provides essential context for understanding its role in the settlement.",validateFn:e=>e?e.length<30?`Description must be at least 30 characters long. You need ${30-e.length} more characters.`:null:"Description is required",keypath:"description"}},Ve=()=>{var r,l,i,p;const{tool:e,id:o,showModal:n}=z(),{edit:a,updateTool:s}=F(e,o);return t.jsxs(t.Fragment,{children:[t.jsxs(u,{sx:{gridColumn:"span 3",display:"flex",alignItems:"center",gap:2},children:[t.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,flexGrow:1,flexShrink:2},children:[t.jsx(v,{variant:"h6",children:"Icon"}),t.jsx(Y,{onClick:()=>{n({entry:{componentKey:"IconSelector",props:{tool:e,id:o},id:"icon-selector"}})},sx:{boxShadow:4,borderRadius:"50%",height:64,width:64},children:t.jsx(Q,{viewBox:((r=a==null?void 0:a.icon)==null?void 0:r.viewBox)||"0 0 664 512",path:((l=a==null?void 0:a.icon)==null?void 0:l.d)||"",size:24,color:((i=a==null?void 0:a.icon)==null?void 0:i.color)||"primary",backgroundColor:((p=a==null?void 0:a.icon)==null?void 0:p.backgroundColor)||"background.paper"})})]}),t.jsx(S,{inputConfig:P.name,style:{flexGrow:2,flexShrink:1,px:1}})]}),t.jsx(S,{inputConfig:P.description,style:{gridColumn:"span 3",px:1},multiline:!0}),t.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",pl:2,gap:16,gridColumn:"span 3"},children:t.jsxs(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},children:[t.jsx(E,{title:"Positive type is best a high scores. Negative type is best a low scores.",children:t.jsx(v,{variant:"h6",children:"Attribute Type"})}),t.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(v,{variant:"body1",children:a!=null&&a.positive?"Positive":"Negative"}),t.jsx(q,{checked:(a==null?void 0:a.positive)===!0,onChange:g=>{s("positive",g.target.checked)}})]})]})})]})},Ge=({columns:e})=>{const{tool:o,id:n}=b.useContext(be);F(o,n);const[a,s]=b.useState(!1);return t.jsxs(u,{children:[t.jsxs(le,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,gridColumn:"span 3"},children:[t.jsxs(ce,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(v,{children:"Autobalance"}),t.jsx(E,{title:"Automatically adjust related values to maintain a balanced configuration.",children:t.jsx(xe,{sx:{fontSize:18,color:"text.secondary",cursor:"pointer"}})})]}),t.jsx(q,{checked:a,onChange:r=>s(r.target.checked)})]}),t.jsxs(u,{sx:{display:"grid",gridTemplateColumns:["1fr","1fr",`repeat(${e}, 1fr)`],gridTemplateRows:"auto",alignItems:"start",justifyContent:"center",my:2,gap:2,backgroundColor:"background.paper",width:"100%",position:"relative",gridColumn:"span 3"},children:[t.jsx(S,{inputConfig:P.maxPerLevel}),t.jsx(S,{inputConfig:P.healthPerLevel}),t.jsx(S,{inputConfig:P.costPerLevel})]})]})},Ke={name:"",tooltip:"",type:"number",validate:e=>e<=-1?"Value must be 0 or greater":null,keypath:""},Xe=[{name:"Fortified",description:"Fortified Settlements put their trust in theirs walls, preemptive reconnaissance, and well-trained troops.",id:"789"},{name:"Mercantile",description:"Mercantile Settlements focus on establishing and expanding trade, developing vibrant culture, and welcoming artisans.",id:"456"},{name:"Survivalist",description:"Survivalists focus on gathering food, supplies, medical items, and constructing durable shelters.",id:"123"}],Ye=()=>{const{tool:e,id:o}=z(),{data:n,order:a,errors:s,add:r,remove:l}=fe(e,o,"settlementPointCost"),[i,p]=b.useState(null),[g,d]=b.useState(""),w=b.useMemo(()=>{const c=Object.keys(n||{}).reduce((x,k)=>(x.push(k),x),[]);return Xe.filter(x=>!c.includes(x.id))},[n]),m=b.useMemo(()=>Object.entries(n||{}).map(([c,h])=>{const x=h;return{...Ke,name:x.name,label:x.name.charAt(0).toUpperCase()+x.name.slice(1),tooltip:void 0,id:c,keypath:`settlementPointCost.data.${c}.value`}}),[n]);return a?t.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"1fr 0.1fr 1fr",gap:2},children:[t.jsxs(u,{sx:{gridColumn:"span 3",p:2},children:["Define the"," ",t.jsx(E,{title:t.jsx(v,{children:"Settlements earn 1 settlement point per level per turn, barring other boons or banes. Click for for more information."}),children:t.jsxs(v,{component:"span",sx:{textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},children:["Settlement Point Cost"," "]})}),"of this attribute per Settlement Type. A value of ",t.jsx("strong",{children:"0"})," ","means this cannot be purchased with settlement points for that settlement type."]}),t.jsx(u,{sx:{display:"flex",alignItems:"start",width:"100%"},children:t.jsx(de,{inputValue:g,options:w,getOptionLabel:c=>c.name,renderInput:c=>t.jsx(pe,{...c,label:"Settlement Type",variant:"outlined",error:!!(s!=null&&s.name),helperText:s==null?void 0:s.name,onChange:h=>{d(h.target.value)},onKeyDown:h=>{h.key==="Enter"&&(r({id:i.id,entry:{name:i.name,value:1},sort:!1}),d(""))}}),onChange:(c,h)=>{p(h),d((h==null?void 0:h.name)||"")},renderOption:(c,h)=>b.createElement(u,{...c,component:"li",key:h.name,sx:{display:"flex",alignItems:"center"}},t.jsx(E,{title:t.jsx(v,{children:h.description}),placement:"left",arrow:!0,children:t.jsx(v,{children:h.name})})),sx:{my:2,width:"100%"}})}),t.jsx(j,{orientation:"vertical",flexItem:!0,children:t.jsx(ue,{label:t.jsx(Ue,{}),onClick:()=>{r({id:i.id,entry:{name:i.name,value:1},sort:!1}),d("")},sx:{width:"100%",color:"white"}})}),t.jsx(u,{children:a.map((c,h)=>{const x=m.find(k=>k.id===c);return x?t.jsx(J.Fragment,{children:t.jsx(S,{inputConfig:x,style:{width:"100%",m:0,p:0},shrink:!0,onMoreDetails:x.name!=="default"?()=>{console.log("More details clicked")}:void 0,onRemove:x.name!=="default"?()=>l(c):void 0})},c):null})})]}):t.jsx(u,{children:"Loading..."})},Je={flammable:{enabled:!1,tooltip:"Vulnerable to fire.",eventTags:[{name:"Fire",description:"Events which involve fire or burning.",weight:1},{name:"Arson",description:"Events which involve intentional fire damage.",weight:.75}]},durable:{enabled:!1,tooltip:"Resistant to damage or wear.",eventTags:[{name:"Infrastructure",description:"Events which affect the durability of structures or resources.",weight:1},{name:"Maintenance",description:"Events which require upkeep or repair of structures or resources.",weight:1}]},perishable:{enabled:!1,tooltip:"Degrades over time without proper storage.",eventTags:[{name:"Famine",description:"A shortage of food or other perishable resources consumed for survival.",weight:1},{name:"Spoilage",description:"A loss of resources due to improper storage or handling.",weight:1}]},valuable:{enabled:!1,tooltip:"High worth; a frequent target for theft or trade.",eventTags:[{name:"Theft",description:"Events which involve the loss of valuable resources.",weight:1},{name:"Trade",description:"Events which involve the exchange of valuable resources.",weight:1}]},renewable:{enabled:!1,tooltip:"Can replenish naturally over time.",eventTags:[{name:"Harvest",description:"Events which involve the collection of renewable resources.",weight:1},{name:"Replanting",description:"Events which involve the restoration of renewable resources.",weight:1}]},scarce:{enabled:!1,tooltip:"Difficult to obtain or maintain in this region.",eventTags:[{name:"Scarcity",description:"Events which involve a shortage of scarce resources.",weight:1},{name:"Rationing",description:"Events which involve the controlled distribution of scarce resources.",weight:1},{name:"Surplus",description:"Events which involve an excess of scarce resources.",weight:.5}]},agricultural:{enabled:!1,tooltip:"Tied to farming or rural industries.",eventTags:[{name:"Harvest",description:"Events which involve the collection of agricultural resources.",weight:1},{name:"Planting",description:"Events which involve the cultivation of agricultural resources.",weight:1}]},industrial:{enabled:!1,tooltip:"Related to manufacturing or heavy labor.",eventTags:[{name:"Industrial Accident",description:"Events which involve the loss of life or resources due to industrial activity.",weight:1},{name:"Labor Shortage",description:"Events which involve a lack of ready or willing workers",weight:1}]},arcane:{enabled:!1,tooltip:"Linked to magic or the supernatural.",eventTags:[{name:"Magic",description:"Events which involve the use of arcane resources.",weight:1},{name:"Curses",description:"Events which involve the misuse or backlash of arcane resources.",weight:1}]},religious:{enabled:!1,tooltip:"A resource important to faith or rituals.",eventTags:[{name:"Religious Ceremony",description:"Events which involve the use of religious resources.",weight:1},{name:"Sacrifice",description:"Events which involve the loss of religious resources.",weight:1}]},exotic:{enabled:!1,tooltip:"Uncommon or unique to the region.",eventTags:[{name:"Exotic Trade",description:"Events which involve the exchange of rare or unique resources.",weight:1},{name:"Discovery",description:"Events which involve the identification of rare or unique resources.",weight:1}]},edible:{enabled:!1,tooltip:"Can be consumed for survival.",eventTags:[{name:"Feast",description:"Events which involve the consumption of edible resources.",weight:1},{name:"Famine",description:"A shortage of food or other perishable resources consumed for survival.",weight:1},{name:"Plague",description:"Events which involve the spread of disease.",weight:1}]},toxic:{enabled:!1,tooltip:"Harmful if improperly handled or consumed.",eventTags:[{name:"Poisoning",description:"Events which involve the harmful effects of toxic resources.",weight:1},{name:"Contamination",description:"Events which involve the spread of toxic resources.",weight:1}]},strategic:{enabled:!1,tooltip:"Important in warfare or diplomacy.",eventTags:[{name:"War",description:"Events which involve the use of strategic resources.",weight:1},{name:"Diplomacy",description:"Events which involve the use of strategic resources.",weight:1}]},contested:{enabled:!1,tooltip:"Frequently the focus of disputes or events.",eventTags:[{name:"Conflict",description:"Events which involve the use of contested resources.",weight:1},{name:"Dispute",description:"Events which involve the use of contested resources.",weight:1}]}},Qe={"Resource Properties":["flammable","durable","perishable","valuable","renewable","scarce"],"Thematic Tags":["agricultural","industrial","arcane","religious","exotic"],"Situational Tags":["edible","toxic","strategic","contested"]},Ze=()=>{const[e,o]=b.useState(Je),n=a=>{o(s=>({...s,[a]:{...s[a],enabled:!s[a].enabled}}))};return t.jsx(u,{sx:{padding:2,boxShadow:4,borderRadius:4,backgroundColor:"background.default"},children:t.jsx(he,{component:ge,sx:{maxHeight:"340px",overflow:"auto",boxShadow:0},children:t.jsxs(Le,{stickyHeader:!0,size:"small",children:[t.jsx(qe,{children:t.jsxs(O,{children:[t.jsx(y,{sx:{backgroundColor:"background.default"},children:t.jsx(v,{variant:"h6",children:"Category"})}),t.jsx(y,{sx:{backgroundColor:"background.default"},children:t.jsx(v,{variant:"h6",children:"Tag"})}),t.jsx(y,{align:"center",sx:{backgroundColor:"background.paper"},children:t.jsx(v,{variant:"h6",children:"Enabled"})})]})}),t.jsx(De,{children:Object.entries(Qe).map(([a,s])=>t.jsxs(J.Fragment,{children:[t.jsx(O,{children:t.jsx(y,{colSpan:3,sx:{position:"sticky",top:40,zIndex:1,fontWeight:"bold",backgroundColor:"secondary.main",color:"common.white"},children:t.jsx(v,{variant:"h6",children:a})})}),s.map((r,l)=>t.jsxs(O,{sx:{backgroundColor:i=>l%2===0?i.palette.divider:i.palette.background.default},children:[t.jsx(y,{}),t.jsx(y,{children:t.jsx(E,{title:e[r].tooltip,arrow:!0,children:t.jsx("span",{children:t.jsx("strong",{children:r.charAt(0).toUpperCase()+r.slice(1)})})})}),t.jsx(y,{align:"center",children:t.jsx(q,{checked:e[r].enabled,onChange:()=>n(r),color:"secondary"})})]},r))]},a))})]})})})},_e=()=>{var m;const{isSplit:e}=me(),{id:o}=z(),{edit:n}=F("attribute",o),[a,s]=b.useState(!1),[r,l]=b.useState(!1),[i,p]=b.useState(!1),[g,d]=b.useState(!1),w=e?1:3;return t.jsxs(u,{sx:{display:"grid",gridTemplateColumns:["1fr","1fr",`repeat(${w}, 1fr)`],gridTemplateRows:"auto",alignItems:"start",justifyContent:"start",my:2,gap:2,backgroundColor:"background.paper",width:"100%",position:"relative",overflowY:"auto",maxHeight:"calc(100vh - 125px)"},children:[t.jsx(Ve,{}),t.jsx(j,{sx:{gridColumn:"span 3"}}),t.jsx($,{title:"Values",titleType:"h6",open:a,styles:{width:"100%",marginBottom:2},boxSx:{gridColumn:"span 3"},toggleOpen:()=>s(!a),children:t.jsx(Ge,{columns:w})}),t.jsx($,{title:"Settlement Point Costs",titleType:"h6",open:g,styles:{width:"100%",marginBottom:2},boxSx:{gridColumn:"span 3"},toggleOpen:()=>d(!g),children:t.jsx(Ye,{})}),t.jsx($,{title:"Thresholds",titleType:"h6",open:r,styles:{width:"100%",marginBottom:2},boxSx:{gridColumn:"span 3"},toggleOpen:()=>l(!r),children:t.jsx(we,{})}),t.jsx($,{title:`Tags (${(m=n==null?void 0:n.tags)==null?void 0:m.length} / 5)`,titleType:"h6",open:i,styles:{width:"100%",marginBottom:2},boxSx:{gridColumn:"span 3"},toggleOpen:()=>p(!i),children:t.jsx(Ze,{})})]})},et=()=>{var r,l,i,p,g,d,w;const{tool:e,id:o,mode:n,side:a}=z(),{current:s}=F("attribute",o);return t.jsxs(u,{sx:{display:"grid",gridTemplateColumns:["1fr","1fr 1fr","repeat(3, 1fr)"],gridTemplateRows:"auto",alignItems:"start",justifyContent:"center",mt:2,gap:2,backgroundColor:"background.paper",width:"100%",position:"relative",pb:4},children:[t.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,height:"88px",flexGrow:1,flexShrink:2},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.25rem"},children:"Icon"}),t.jsx(Y,{sx:{boxShadow:4,borderRadius:"50%",height:64,width:64},disabled:!0,children:t.jsx(Q,{viewBox:((r=s==null?void 0:s.icon)==null?void 0:r.viewBox)||"0 0 664 512",path:((l=s==null?void 0:s.icon)==null?void 0:l.d)||"",size:24,color:((i=s==null?void 0:s.icon)==null?void 0:i.color)||"primary",backgroundColor:((p=s==null?void 0:s.icon)==null?void 0:p.backgroundColor)||"background.paper"})})]}),t.jsxs(u,{sx:{gridColumn:"span 2",display:"flex",gap:2,alignItems:"center",justifyContent:"start",height:"100%"},children:[t.jsx(v,{variant:"h6",children:"Name:"}),t.jsx(v,{children:(s==null?void 0:s.name)||"None"})]}),t.jsx(j,{sx:{gridColumn:"span 3",borderColor:"#ccc",fontWeight:"bold"},children:"DESCRIPTION"}),t.jsxs(u,{sx:{gridColumn:"span 3",display:"flex",flexDirection:"column",gap:2,alignItems:"start",justifyContent:"center"},children:[t.jsx(v,{sx:{textAlign:"start"},variant:"body1",children:(s==null?void 0:s.description)||"No description"}),t.jsxs(u,{sx:{gridColumn:"span 3",display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:"bold"},children:"Type:"}),t.jsx(v,{variant:"body1",children:s!=null&&s.positive?"Positive":"Negative"})]})]}),t.jsxs(j,{sx:{gridColumn:"span 3",borderColor:"#ccc",fontWeight:"bold"},children:[" ","SCALING PER LEVEL"," "]}),t.jsxs(u,{sx:{display:"grid",gridTemplateColumns:["1fr","1fr 1fr","repeat(3, 1fr)"],gridColumn:"span 3",columnGap:2},children:[t.jsx(L,{name:"Max",value:(g=s==null?void 0:s.balance)==null?void 0:g.maxPerLevel,even:!1}),t.jsx(L,{name:"Health",value:(d=s==null?void 0:s.balance)==null?void 0:d.healthPerLevel,even:!0}),t.jsx(L,{name:"Cost",value:(w=s==null?void 0:s.balance)==null?void 0:w.costPerLevel,even:!1})]}),t.jsx(j,{sx:{gridColumn:"span 3",borderColor:"#ccc",fontWeight:"bold"},children:"SETTLEMENT POINT COSTS"}),s.settlementPointCost.order.map((m,c)=>t.jsx(L,{name:s.settlementPointCost.data[m].name,value:s.settlementPointCost.data[m].value,even:c%2===0},m)),t.jsx(j,{sx:{gridColumn:"span 3",borderColor:"#ccc",fontWeight:"bold"},children:"THRESHOLDS"}),t.jsx(ye,{data:s.thresholds.data,order:s.thresholds.order})]})},tt=[{keypath:"name",label:"Name"},{keypath:"description",label:"Description"},{keypath:"balance.maxPerLevel",label:"Max Per Level"},{keypath:"balance.healthPerLevel",label:"Health Per Level"},{keypath:"balance.costPerLevel",label:"Cost Per Level"},{keypath:"settlementPointCost.data",label:"Settlement Point Cost",type:"group"},{keypath:"thresholds.data",label:"Thresholds",type:"group"}],st=["name","description","balance","thresholds","settlementPointCost"],pt=({tab:e})=>t.jsx(Ce,{tab:e,initializeTool:We,validationFields:st,editComponent:_e,previewComponent:et,checklistContent:tt});export{pt as default,st as validationFields};
