import{y as ee,z as te,r as l,u as se,bh as ne,j as e,bi as oe,s as ae,c as re,T as w,C as M,d as ie,m as le,F as k,a0 as ce,a$ as ue,aP as de,a1 as pe,i as me,K as he,G as I,I as z,H as xe}from"./main.js";import{u as ve}from"./useTools.js";function fe(s){return te("MuiInputAdornment",s)}const _=ee("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var B;const ge=(s,t)=>{const{ownerState:o}=s;return[t.root,t[`position${M(o.position)}`],o.disablePointerEvents===!0&&t.disablePointerEvents,t[o.variant]]},be=s=>{const{classes:t,disablePointerEvents:o,hiddenLabel:i,position:d,size:h,variant:x}=s,f={root:["root",o&&"disablePointerEvents",d&&`position${M(d)}`,x,i&&"hiddenLabel",h&&`size${M(h)}`]};return ie(f,fe,t)},je=ae("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ge})(le(({theme:s})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(s.vars||s).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${_.positionStart}&:not(.${_.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Ce=l.forwardRef(function(t,o){const i=se({props:t,name:"MuiInputAdornment"}),{children:d,className:h,component:x="div",disablePointerEvents:f=!1,disableTypography:y=!1,position:g,variant:b,...T}=i,p=ne()||{};let j=b;b&&p.variant,p&&!j&&(j=p.variant);const S={...i,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:f,position:g,variant:j},E=be(S);return e.jsx(oe.Provider,{value:null,children:e.jsx(je,{as:x,ownerState:S,className:re(E.root,h),ref:o,...T,children:typeof d=="string"&&!y?e.jsx(w,{color:"textSecondary",children:d}):e.jsxs(l.Fragment,{children:[g==="start"?B||(B=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,d]})})})}),ye=k(e.jsx("path",{d:"m19 1-5 5v11l5-4.5zM1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6m22 13.5V6c-.6-.45-1.25-.75-2-1v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5v2c1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5z"}),"AutoStories"),Se=k(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),Ie=k(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),ze=s=>{let t=s;return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-zA-Z0-9_]/g,""),t=t.toLowerCase(),t},we=(s,t)=>Math.round(s*10**t)/10**t,G=pe.debounce((s,t,o,i)=>{s(t,o,i)},250),Ae=({placeholder:s="",style:t={},snakeCase:o=!1,debounced:i=!0,multiline:d=!1,inputConfig:h,disabled:x=!1,shrink:f=!0,onBlur:y=()=>{},onMoreDetails:g,onRemove:b,dynamicLabel:T,decimals:p=2,allowZero:j=!0})=>{const S=ce(),{tool:E,id:K,tab:L}=l.useContext(ue),{selectStaticValue:O,selectEditValue:X,updateTool:V,validateToolField:$,selectErrorValue:Z}=ve(E,K),{label:A,type:P="text",tooltip:F,validateFn:m,keypath:c}=h,n=Z(c),q=X(c),R=O(c),[C,U]=l.useState(!1),[v,N]=l.useState(!0),[J,D]=l.useState(q??"");l.useEffect(()=>{C&&!n?N(!1):C&&n&&N(!0)},[C,n]);const W=l.useCallback(r=>{if(P==="number"){const a=we(r.target.value,p);let u=j?a:Math.max(1,a);r.target.value=u,D(u);const Y=(m==null?void 0:m(u))||null;return{value:Number(u),error:Y}}else{const a=o?ze(r.target.value):r.target.value;r.target.value=a,D(a);const u=(m==null?void 0:m(a))||null;return{value:a,error:u}}},[c,P,o,V,m,$]),H=l.useCallback((r,a)=>{V(c,r||" "),$(c,a),r!==R&&S(de({tabId:L.tabId,side:L.side,keypath:"viewState.isDirty",updates:!0}))},[c,R]),Q=l.useCallback(r=>{const{value:a,error:u}=W(r);i?G(H,a,u,{keypath:c}):H(a,u)},[i,W,c]);return e.jsx(me,{sx:{...t},children:e.jsx(he,{disabled:x,label:T||A,multiline:d,type:P,value:J,onChange:Q,placeholder:s,helperText:C?n:"",fullWidth:!0,margin:"normal",onFocus:()=>U(!0),onBlur:r=>{U(!0),y&&y(),i&&G.flush()},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:n?v?"warning.main":"secondary.main":"success.main"},"&:hover fieldset":{borderColor:n?v||n?"warning.main":"":"success.main"},"&.Mui-focused fieldset":{borderColor:n?v||n?"warning.main":"":"success.main"}},mb:2},slotProps:{inputLabel:{shrink:!!C||f,sx:{fontWeight:"bold",color:n&&v?"warning.main":"success.main","&.Mui-focused":{color:v?"warning.main":"success.main"}}},input:{endAdornment:e.jsxs(Ce,{position:"end",children:[n?e.jsx(I,{title:e.jsx(e.Fragment,{children:n?e.jsx(w,{variant:"body2",children:n}):e.jsx(w,{variant:"body2",children:"This field needs correction"})}),arrow:!0,children:e.jsx(z,{children:e.jsx(Ie,{fontSize:"small",sx:{color:"warning.main"}})})}):null,F&&!x&&e.jsx(I,{title:e.jsx(e.Fragment,{children:e.jsx(w,{variant:"body2",children:F})}),arrow:!0,children:e.jsx(z,{children:e.jsx(Se,{fontSize:"small",sx:{cursor:"pointer",color:"secondary.main"}})})}),g&&e.jsx(I,{title:`Click for ${A} details`,arrow:!0,children:e.jsx(z,{onClick:g,sx:{color:"primary.main"},children:e.jsx(ye,{fontSize:"small"})})}),b&&e.jsx(I,{title:`Remove ${A}`,arrow:!0,children:e.jsx(z,{onClick:b,sx:{color:"warning.main"},children:e.jsx(xe,{fontSize:"small"})})})]})},formHelperText:{sx:{position:"absolute",bottom:"-20px",fontSize:"10px",color:v?"warning.main":"transparent",display:{xs:"none",xl:"block"}}}}})})};export{Se as I,Ae as T};
