import{u as H,w as F,aB as ae,aC as le,r as d,aD as Y,aE as re,b as ne,aF as oe,aG as se,j as l,ab as O,l as S,ae as I,A as Z,aH as T,C as W,aI as Q,aa as ie,n as ce,g as K,ag as pe,au as ue,T as G,B as D,aJ as de,d as q,k as me,aK as ye,aL as he,aM as be}from"./main.js";import{P as J,S as fe,a as A}from"./PageBox.js";import{u as ge}from"./useTabSplit.js";import{T as xe}from"./TabbedContent.js";import{E as ve,t as X,a as ke,u as Se,b as Ce}from"./extensions.js";import{A as je}from"./TagTable.js";const Te=(e,a)=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error getting local storage item:",t),a??null}},Ee=(e,a)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch(t){console.error("Error setting local storage item:",t)}},Le=e=>{try{localStorage.removeItem(e)}catch(a){console.error("Error removing local storage item:",a)}},we=e=>({get:a=>Te(e,a),set:a=>Ee(e,a),remove:()=>Le(e)}),z=(e,a)=>{const t=H(),n=F(ae(e,a)),c=F(le(e,a)),g=d.useCallback((o,v)=>t(Y.getOptionsByProperty({glossaryId:e,entryId:a,property:o,inheritanceMap:v})),[e,a]),p=o=>F(re(e,a,o)),y=we(`${e}-${a}`),h=d.useCallback(o=>{console.log("updating node ",n," with content: ",o)},[t,e,n]),x=d.useCallback(()=>y.get(),[e,a]),f=d.useCallback(o=>{y.set(o)},[e,a]),s=d.useCallback(()=>{y.remove()},[e,a]),m=d.useCallback(()=>{const o=y.get();if(!o)return!1;const v=new Date((c==null?void 0:c.updatedAt)||0);return new Date(o.updatedAt)>v},[e,a]);return d.useEffect(()=>{!c&&(n!=null&&n.entryType)&&t(Y.getEntryById({nodeId:a,glossaryId:e,entryType:n.entryType}))},[t,a,e,n.entryType,c]),{node:n,entry:c,buildOptionsByKeypath:g,getOptionsByKeypath:p,updateGlossaryEntry:h,getLocalStorage:x,setLocalStorage:f,clearLocalStorage:s,localIsNewer:m}},Ae=({tab:e,editComponent:a,editComponentProps:t,previewComponent:n,previewComponentProps:c})=>{const g=H(),{showModal:p,closeModal:y}=ne(),{tool:h,id:x,mode:f,side:s,tabId:m,glossaryId:o,tabType:v}=e,j=C=>{const k=S.cloneDeep(e.viewState.lastSaved||{});k[C]=new Date().toISOString(),g(I({tabId:m,side:s,keypath:"viewState.lastUpdated",updates:k}))};if(!o)return null;const{node:E,entry:P}=z(o,x),N=F(oe(o)),M=d.useMemo(()=>se({node:E,nodeStructure:N}),[E,N]),{splitSize:u,soloSize:r,splitTabs:i}=ge(),b=d.useMemo(()=>({tab:e,tool:h,id:x,mode:f,side:s,tabId:m,glossaryId:o,entry:P,node:E,inheritanceMap:M,updateLastSaved:j,showModal:p,closeModal:y}),[e,h,x,f,s,m,o,P,j,p,y,E,M]);return P?l.jsx(fe.Provider,{value:b,children:l.jsx(J,{variant:i?u?"default":"blend":r?"blend":"default",tabType:"glossary",mode:f,children:f==="edit"&&a?O.createElement(a,{...t}):f==="preview"&&n?O.createElement(n,{...c}):l.jsx("div",{style:{padding:"16px"},children:"Yo shit is busted, bruh"})})}):l.jsx(J,{mode:f,variant:"default",children:"Loading..."})},L=e=>e,Pe=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climate"},{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"regions",label:"Regions"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),Me=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climates",hasPrimary:!0},{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"landmarks",label:"Landmarks"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations",hasPrimary:!0},{multiple:!0,keypath:"factions",label:"Factions",hasPrimary:!1},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"resources",label:"Resources"}]}]),Oe=L([{name:"Government",children:[{multiple:!0,keypath:"capital",label:"Capital"},{multiple:!1,keypath:"governmentType",label:"Government Type"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"notableFigures",label:"Notable Figures"},{multiple:!1,keypath:"culture",label:"Culture"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"languages",label:"Languages"},{multiple:!1,keypath:"economy",label:"Economy"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"Geography",children:[{multiple:!0,keypath:"continent",label:"Continents"},{multiple:!0,keypath:"regions",label:"Regions"},{multiple:!0,keypath:"geography",label:"Landmarks"}]},{name:"History",children:[{multiple:!1,keypath:"history",label:"History"},{multiple:!0,keypath:"notableEvents",label:"Notable Events"},{multiple:!0,keypath:"flags",label:"Flags"}]}]),De=L([{name:"Geography",children:[{multiple:!0,keypath:"terrain",label:"Terrain"},{multiple:!0,keypath:"locations",label:"Locations"},{multiple:!0,keypath:"landmarks",label:"Landmarks"}]},{name:"Political",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"resources",label:"Resources"},{multiple:!1,keypath:"population",label:"Population"},{multiple:!0,keypath:"people",label:"People"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),Ne=L([{name:"Geography",children:[{multiple:!1,keypath:"climates",label:"Climate"},{multiple:!0,keypath:"regions",label:"Region",hasPrimary:!0},{multiple:!1,keypath:"geographicType",label:"Type"}]},{name:"Notes",children:[{multiple:!1,keypath:"notes",label:"Notes"}]}]),Re=L([{name:"Geopolitical",children:[{multiple:!0,keypath:"nation",label:"Nation"},{multiple:!0,keypath:"region",label:"Region"},{multiple:!1,keypath:"population",label:"Population"}]},{name:"Government",children:[{multiple:!1,keypath:"government",label:"Government"},{multiple:!1,keypath:"type",label:"Settlement Type"},{multiple:!1,keypath:"economy",label:"Economy"},{multiple:!1,keypath:"culture",label:"Culture"},{multiple:!0,keypath:"people",label:"Notable Figures"}]},{name:"History",children:[{multiple:!0,keypath:"events",label:"Notable Events"},{multiple:!0,keypath:"locations",label:"Notable Locations"},{multiple:!1,keypath:"history",label:"History"}]}]),Ge=L([{name:"Roster",children:[{multiple:!0,keypath:"leader",label:"Leader"},{multiple:!0,keypath:"homeBase",label:"Home Base"},{multiple:!0,keypath:"members",label:"Members"}]},{name:"Geopolitical",children:[{multiple:!0,keypath:"nations",label:"Nations"},{multiple:!0,keypath:"regions",label:"Regions"}]},{name:"Relationships",children:[{multiple:!0,keypath:"allies",label:"Allies"},{multiple:!0,keypath:"enemies",label:"Enemies"}]}]),ze=L([{name:"Profession",children:[{multiple:!1,keypath:"occupation",label:"Occupation"},{multiple:!1,keypath:"title",label:"Title"}]},{name:"Background",children:[{multiple:!0,keypath:"traits",label:"Traits"},{multiple:!0,keypath:"faction",label:"Faction"},{multiple:!1,keypath:"history",label:"History"}]},{name:"Details",children:[{multiple:!0,keypath:"location",label:"Location"},{multiple:!1,keypath:"appearance",label:"Appearance"},{multiple:!1,keypath:"events",label:"Events"}]}]),Be=L([{name:"Details",children:[{multiple:!1,keypath:"locationType",label:"Type"},{multiple:!0,keypath:"currentOccupants",label:"Current Occupants"},{multiple:!0,keypath:"resources",label:"Resources"}]},{name:"History",children:[{multiple:!0,keypath:"eventLog",label:"Event Log"}]}]),Ie=L([{name:"Details",children:[{multiple:!1,keypath:"type",label:"Type"},{multiple:!1,keypath:"priority",label:"Priority"},{multiple:!1,keypath:"dueDate",label:"Due Date"},{multiple:!0,keypath:"sharedWith",label:"Shared With"}]}]),$e=L([{name:"Details",children:[{multiple:!1,keypath:"significance",label:"Significance"},{multiple:!1,keypath:"gameDate",label:"Game Date"},{multiple:!0,keypath:"location",label:"Location"},{multiple:!1,keypath:"frequency",label:"Frequency"}]},{name:"Related",children:[{multiple:!0,keypath:"relatedEntries",label:"Related Entries"}]}]),Fe={continent:Pe,territory:Me,domain:Oe,province:De,landmark:Ne,settlement:Re,faction:Ge,person:ze,location:Be,note:Ie,event:$e},He=({multiple:e=!0,label:a,keypath:t,alphabetizeOptions:n=!0,hasPrimary:c=!1,placeholder:g})=>{const{glossaryId:p,id:y,inheritanceMap:h}=A();if(!p)return null;const{entry:x,updateGlossaryEntry:f,getOptionsByKeypath:s,buildOptionsByKeypath:m}=z(p,y),o=s(t);console.log(o),d.useEffect(()=>{o||m(t,h)},[t,o]);const[v,j]=O.useState(c?"Aymaq":""),E=O.useRef(null);function P(r,i){const b=new Map,C={inherited:1,nearby:2,extended:3,other:4};for(const k of Object.keys(C))for(const w of r[k]??[]){const $=(Array.isArray(w[i]),w[i]);if($)for(const R of $)if(b.has(R)){const B=b.get(R);B.sources.push({id:w.id,name:w.name,relationship:k});const ee=C[k],te=C[B.group];console.log(ee,te,"tier and existingTier"),C[k]<C[B.group]&&(console.log("Updating group for",R,"from",B.group,"to",k),B.group=k)}else b.set(R,{value:R,label:R,group:k,sources:[{id:w.id,name:w.name,relationship:k}]})}return[...b.values()].map(k=>({...k,label:S.capitalize(k.label),group:S.capitalize(k.group)}))}const N=d.useMemo(()=>o?Object.entries(o).flatMap(([r,i])=>i.filter(b=>!!b[t]).map(b=>({label:S.capitalize(b[t]),value:b[t],group:S.capitalize(r),meta:{id:b.id,name:b.name}}))):[],[o,t]),M=r=>{var b;Array.isArray(r)&&(c&&(r.includes(v)||(r=[v,...r])),r=r.map(C=>C.trim().toLowerCase()));const i={[t]:r};f(i),e&&((b=E.current)==null||b.focus())};console.log(N,"displayOptions"),console.log(x[t],"entry[keypath]");const u=o?P(o,t):[];return console.log(u,"deduped options"),l.jsx(Z,{freeSolo:!0,disablePortal:!0,multiple:e,options:u,groupBy:r=>r.group,value:Array.isArray(x[t])?x[t].map(r=>({label:S.capitalize(r)})):x[t]?{label:S.capitalize(x[t])}:[],disableCloseOnSelect:e,onChange:(r,i)=>{i===null?M(e?[]:""):Array.isArray(i)?M(i.map(b=>b.label)):M([i.label])},renderInput:r=>l.jsx(K,{...r,inputRef:E,label:a,variant:"outlined",fullWidth:!0,slotProps:{inputLabel:{shrink:!0}}}),renderTags:(r,i)=>r.map((b,C)=>d.createElement(ie,{label:b,...i({index:C}),key:b.value,sx:{mr:.5,mb:.5,backgroundColor:k=>ce(k.palette.primary.main,k.palette.mode==="dark"?.5:.9),color:"primary.contrastText"}})),blurOnSelect:!e,getOptionLabel:r=>{var i;return((i=r[0])==null?void 0:i.label)||""},renderOption:(r,i,{selected:b})=>{const C=i.value===v,w=b&&!C;return d.createElement(T,{component:"li",...r,key:i.value,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative"}},l.jsxs(T,{children:[e&&c&&l.jsx(W,{title:C?`This is the current primary ${t}.`:w?`Make ${i} the primary ${t}`:"",children:l.jsx("span",{children:l.jsx(Q,{checked:C,disabled:!w&&!C,onClick:$=>$.stopPropagation(),onChange:()=>j(i),disableRipple:!0,tabIndex:-1,sx:{mr:1}})})}),S.capitalize(i.label)]}))}})};function Ue(e){return[...e].sort((a,t)=>a.localeCompare(t))}const _e=({multiple:e=!0,label:a,keypath:t,options:n,alphabetizeOptions:c=!0,hasPrimary:g=!1,placeholder:p})=>{const{glossaryId:y,id:h}=A();if(!y)return null;const[x,f]=O.useState(""),{entry:s,updateGlossaryEntry:m}=z(y,h),[o,v]=O.useState(g?"Aymaq":""),j=O.useRef(null),E=d.useMemo(()=>{let u=n.filter(r=>s[t]?Array.isArray(s[t])?!s[t].some(i=>i.toLowerCase()===r.toLowerCase()):s[t].toLowerCase()!==r.toLowerCase():!0);return c?Ue(u).map(r=>r):u.map(r=>S.capitalize(r))},[n]),P=d.useMemo(()=>{if(!s[t])return[];const u=Array.isArray(s[t])?s[t]:[s[t]];return[o,...u.filter(r=>r.toLowerCase()!==o)]},[s,t,o]),N=u=>{var r;if(e){const i={[t]:[...Array.isArray(s[t])?s[t]:s[t]?[s[t]]:[],u].flat()};m(i),e&&((r=j.current)==null||r.focus());return}else{const i={[t]:u};m(i)}},M=u=>{let r=[];Array.isArray(s[t])?r=s[t]:typeof s[t]=="string"&&(r=[s[t]]);const i=r.filter(b=>b.toLowerCase()!==u.toLowerCase());m({[t]:i})};return l.jsxs(T,{sx:{display:"flex",flexDirection:"column",width:"100%",my:2},children:[l.jsx(Z,{options:E,freeSolo:!0,disableCloseOnSelect:!0,value:null,inputValue:x,blurOnSelect:!1,clearOnBlur:!0,onInputChange:(u,r)=>f(r),onChange:(u,r)=>{r&&N(r),f(""),setTimeout(()=>{var i;return(i=j.current)==null?void 0:i.focus()})},renderInput:u=>l.jsx(K,{...u,inputRef:j,placeholder:`Search for ${t}…`,variant:"outlined",fullWidth:!0}),clearOnEscape:!0,selectOnFocus:!0,handleHomeEndKeys:!0,getOptionLabel:u=>S.capitalize(u),renderOption:(u,r)=>d.createElement(T,{component:"li",...u,key:r,sx:{px:1}},S.capitalize(r))}),l.jsx(T,{children:e?P.length>0?l.jsx(T,{sx:{display:"flex",flexDirection:"column",gap:.5,mt:1},children:P.map((u,r)=>l.jsxs(T,{sx:{display:"flex",alignItems:"center",justifyContent:"start",width:"100%",position:"relative"},children:[l.jsx(pe,{onClick:()=>M(u),disabled:o===u.toLowerCase(),children:l.jsx(ue,{sx:{color:o===u.toLowerCase()?"transparent":"inherit"}})}),g&&l.jsx(W,{title:`Click to set ${u} as primary`,placement:"auto",children:l.jsx(Q,{checked:o===u.toLowerCase(),onChange:()=>{o!==u&&v(u.toLowerCase())},disabled:o===u.toLowerCase(),sx:{mr:2}})}),l.jsx(G,{children:S.capitalize(u)})]},u))}):l.jsxs(T,{sx:{textAlign:"left",mt:1,ml:4,color:"text.secondary",fontStyle:"italic"},children:["No ",t," selected"]}):l.jsx(T,{sx:{mt:1,color:"text.secondary",fontStyle:"italic"},children:s[t]?`Selected: ${S.capitalize(s[t])}`:`No ${t} selected`})})]})},We=({propertyMap:e})=>{const{glossaryId:a,id:t}=A();return z(a,t),l.jsx(l.Fragment,{children:e.map(n=>n.multiple?l.jsx(_e,{multiple:!0,keypath:n.keypath,options:[],label:n.label},n.keypath):l.jsx(He,{multiple:!1,keypath:n.keypath,options:[],label:n.label},n.keypath))})},Ke=({label:e,value:a,onSave:t,style:n={}})=>{const[c,g]=d.useState(a),[p,y]=d.useState(!1),h=c!==a;d.useEffect(()=>{g(a)},[a]);const x=()=>{t(c)},f=s=>{g(s.target.value)};return l.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:2,...n},children:[l.jsx(K,{label:e,variant:"outlined",value:c,onChange:f,disabled:!p,fullWidth:!0,slotProps:{input:{endAdornment:p?l.jsx(de,{sx:{color:h?"error.main":"transparent",fontSize:".75rem"}}):null}}}),l.jsx(q,{variant:"contained",onClick:()=>{p&&x(),y(!p),p&&h&&g(a)},children:p?"Save":"Edit"}),l.jsx(q,{variant:"outlined",disabled:!p,onClick:()=>{g(a),y(!1)},children:"Cancel"})]})};var Ye=["second","minute","hour","day","week","month","year"];function qe(e,a){if(a===0)return["just now","right now"];var t=Ye[Math.floor(a/2)];return e>1&&(t+="s"),[e+" "+t+" ago","in "+e+" "+t]}var Je=["秒","分钟","小时","天","周","个月","年"];function Ze(e,a){if(a===0)return["刚刚","片刻后"];var t=Je[~~(a/2)];return[e+" "+t+"前",e+" "+t+"后"]}var _={},V=function(e,a){_[e]=a},Qe=function(e){return _[e]||_.en_US},U=[60,60,24,7,365/7/12,12];function Xe(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function Ve(e,a){var t=e<0?1:0;e=Math.abs(e);for(var n=e,c=0;e>=U[c]&&c<U.length;c++)e/=U[c];return e=Math.floor(e),c*=2,e>(c===0?9:1)&&(c+=1),a(e,c,n)[t].replace("%s",e.toString())}function et(e,a){var t=new Date;return(+t-+Xe(e))/1e3}var tt=function(e,a,t){var n=et(e);return Ve(n,Qe(a))};V("en_US",qe);V("zh_CN",Ze);const at=S.debounce((e,a,t)=>{e({description:a,dataString:t.trim()})},1e3),lt=S.debounce((e,a)=>{e(a)},1e3),rt=({keypath:e,minHeight:a="300px",maxHeight:t="1015px",style:n={}})=>{var m,o;me();const{update:c,entry:g,tab:p,updateLastSaved:y}=A(),h=((o=(m=p==null?void 0:p.viewState)==null?void 0:m.lastUpdated)==null?void 0:o[e])||null;console.log(p==null?void 0:p.viewState);const[x,f]=d.useState(g[e]||""),s=(v,j)=>{at(c,v,j),lt(y,e)};return l.jsxs(D,{sx:{display:"flex",flexDirection:"column",boxSizing:"border-box",border:"1px solid",borderColor:"divider"},children:[l.jsx(D,{className:"shell-editor",sx:{boxSizing:"border-box",display:"flex",flexDirection:"column",position:"relative",minHeight:a,maxHeight:t,overflowY:"scroll",height:"100%",...n},children:l.jsx(ve,{slotBefore:l.jsx(ke,{}),extensions:X,content:x,onUpdate:v=>{const j=v.editor.getHTML(),E=v.editor.getText();f(j),s(j,E)}})}),h&&l.jsxs(G,{variant:"caption",sx:{width:"100%",backgroundColor:v=>v.palette.mode==="dark"?"secondary.main":"background.default",borderTop:"1px solid",borderColor:"divider"},children:["Last Saved: ",tt(h)]})]})},nt=()=>{const{glossaryId:e,id:a,tabId:t,side:n,mode:c}=A(),{updateGlossaryEntry:g,node:p}=z(e,a),y=H(),[h,x]=d.useState(p.name||""),f=d.useRef(!1);d.useEffect(()=>{h!==p.name&&(f.current=!0,g({name:h}),y(I({tabId:t,side:n,keypath:"name",updates:h})))},[h,y,t,n]),d.useEffect(()=>{if(f.current){f.current=!1;return}h!==p.name&&(x(p.name),y(I({tabId:t,side:n,keypath:"name",updates:p.name})))},[p.name]);const s=m=>{x(m),y(I({tabId:t,side:n,keypath:"name",updates:m})),y(ye({node:p}))};return l.jsxs(l.Fragment,{children:[l.jsx(Ke,{label:"Entry Title",value:h,onSave:s,style:{width:"100%",mb:2}}),l.jsx(rt,{keypath:"description",maxHeight:"500px"}),l.jsx(je,{})]})},ot={Overview:nt},st=[{name:"Overview",key:"overview",disabled:!1,props:{keypath:"description"}},{name:"Backlinks",key:"backlinks",disabled:!1,props:{propertyMap:[]}}],it=({propertyMap:e})=>{var f,s;const a=H(),{tab:t}=A(),[n,c]=d.useState(((f=t==null?void 0:t.viewState)==null?void 0:f.activeTab)||"Overview"),[g,p]=d.useState(((s=t==null?void 0:t.viewState)==null?void 0:s.activeIndex)||0),y=d.useMemo(()=>t.side==="right"?"secondary":"primary",[t.side]);d.useEffect(()=>()=>{const m={...t.viewState,activeTab:n,activeIndex:g};a(I({tabId:t.tabId,side:t.side,keypath:"viewState",updates:m}))},[n,g]);const h=d.useMemo(()=>{const m=e.map(v=>({name:v.name,key:v.name,disabled:!1,props:{propertyMap:v.children}}));return st.toSpliced(1,0,...m)},[e]),x=d.useMemo(()=>h.reduce((m,o)=>(m[o.name]=ot[o.name]||We||(()=>null),m),{}),[h]);return l.jsx(xe,{tabs:h,componentMap:x,activeTab:n,handleTabClick:(m,o)=>{c(m),p(o)},lastIndex:g,color:y})},ct=({height:e="100%"})=>{const{glossaryId:a,id:t,mode:n,side:c}=A(),{node:g}=z(a,t);return l.jsx(T,{sx:{display:"flex",flexDirection:"column",flexGrow:1,height:e,mt:2,alignContent:"start",justifyContent:"start",gap:2,borderRadius:n==="edit"?2:0,boxSizing:"border-box",overflowY:"scroll",width:"100%"},children:l.jsx(it,{propertyMap:Fe[g.entryType]})})},pt=({content:e})=>{const a=Se({extensions:X,content:e,editable:!1});return l.jsx(T,{sx:{width:"100%",maxHeight:"calc(100vh - 200px)",overflowY:"auto",borderRadius:2},children:l.jsx(Ce,{editor:a})})},ut=({keypath:e,header:a})=>{const{entry:t}=A();return l.jsxs(D,{sx:{display:"flex",justifyContent:"start",alignItems:"start",mt:2,width:"100%",flexDirection:"column"},children:[l.jsx(G,{sx:{fontSize:"1.25rem",width:"100%",borderBottom:"1px solid",borderColor:"divider",textAlign:"left",fontWeight:600},children:a}),l.jsx(G,{sx:{fontSize:"1.1rem",width:"100%",textAlign:"left",ml:2},children:Array.isArray(t[e])?t[e].map(n=>S.capitalize(n)).join(", "):S.capitalize(t[e])||"No data available"})]})},dt={nations:"Nations",regions:"Regions",locations:"Locations",resources:"Resources",population:"Population",climate:"Climate",terrain:"Terrain",capital:"Capital",languages:"Languages",persons:"Persons",eventLog:"Event Log",geography:"Geography",type:"Type",region:"Regions",landmark:"Landmark",settlement:"Settlement",faction:"Faction",person:"Person",event:"Event",note:"Note"},mt=({keypathArray:e})=>l.jsxs(D,{sx:{width:"100%",p:2,borderLeft:"1px solid",borderColor:"divider"},children:[l.jsx(D,{sx:{width:"100%",display:"flex",justifyContent:"start",alignItems:"center",borderBottom:"1px solid",borderColor:"primary.main",flexWrap:"wrap"},children:he.map(a=>{const t=(Math.random()*(10*Math.random())).toFixed(0),n=t==="1"?"Backlink":"Backlinks";return Number(t)<1?null:l.jsx(W,{title:`${t} ${S.capitalize(a)} ${n}`,children:l.jsxs(D,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1,cursor:"pointer"},children:[be[a],l.jsxs(G,{variant:"body2",sx:{mt:.5},children:["(",t,")"]})]})},a)})}),e.map(a=>l.jsx(ut,{keypath:a,header:dt[a]},a))]}),yt={continent:["nations","regions","locations","resources","population","climate","terrain"],territory:[],domain:["continent","regions","capital","population","languages","persons","eventLog","locations","geography"],province:[],landmark:["region","climate","type"],settlement:[],faction:[],location:["terrain","climate","type","region"],person:[],event:[],note:[]},ht=()=>{const{entry:e,node:a}=A(),{entryType:t}=a;return l.jsxs(T,{sx:{display:"grid",height:"100%",width:"100%",gridTemplateColumns:"2fr 1fr"},children:[l.jsxs(T,{sx:{width:"100%",py:2,borderColor:"divider",display:"flex",flexDirection:"column"},children:[l.jsx(G,{variant:"h2",sx:{mb:2},children:e.name}),l.jsx(pt,{content:e.description})]}),l.jsx(mt,{keypathArray:yt[t]})]})},St=({tab:e})=>l.jsx(Ae,{tab:e,editComponent:ct,editComponentProps:{},previewComponent:ht,previewComponentProps:{}});export{St as default};
