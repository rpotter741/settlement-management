# Listeners System Summary

## Overview

Listeners are modular systems that monitor the state of a settlement and activate when specified conditions are met. They act as thematic groupings of conditions and events, serving as a core mechanism for event recommendation and narrative progression.

---

## Core Properties

### 1. **Name and Description**

- **Name**: Identifies the Listener’s purpose or theme (e.g., "Famine Crisis Pack").
- **Description**: Explains the Listener’s narrative focus (e.g., "Triggers events related to prolonged food shortages.").

### 2. **Tags**

- Tags group Listeners thematically, enabling easier filtering and organization.
  - Example Tags: `famine`, `scarcity`, `rebellion`.
- Tags also act as a way to filter events during Listener Pack creation.

---

## Conditions

### 1. **Defining Conditions**

- Conditions determine when the Listener activates and its events become eligible.
- **Supported Condition Types**:
  - **Attributes**: Thresholds or ranges for specific attributes.
    - Example: `Food < 30`, `Security ≤ 50`.
  - **Tags**: Settlement-level or regional tags (e.g., `arcane`, `haunted`).
  - **Other Variables**: Weather, trade hub activity, or APT thresholds.

### 2. **Complex Logic**

- Listeners support advanced logic, including:
  - **AND/OR**: Combine multiple conditions.
    - Example: `(Food < 30 AND Medical Capacity ≤ 20) OR (Morale < 50)`.
  - **IF Logic (Optional)**: Allows for conditional dependencies between conditions.
    - Example: "IF Food < 30, THEN activate events targeting Medical Capacity."

---

## Event Association

### 1. **Event Pool**

- Listeners maintain a pool of events that are eligible to trigger when the conditions are met.
- **Event Selection Interface**:
  - A drag-and-drop interface for adding or removing events.
  - Default filtering by Listener tags, which can be toggled off for broader searches.

### 2. **Attribute Targeting**

- Users specify which attributes the Listener interacts with.
- Feedback is provided to show how the Listener impacts settlement state.
  - Example: "This Listener targets Food and Morale."

---

## Interactivity and UI

### 1. **Tabbed Interface**

- Listeners use a tabbed interface to separate functionality:
  - **Conditions Tab**: Displays all conditions and their logic.
  - **Events Tab**: Displays the associated event pool with drag-and-drop functionality.

### 2. **Dynamic Feedback**

- When a Listener activates, feedback is provided:
  - Example:
    ```
    Listener: Famine Crisis Pack
    Activated due to:
      - Food < 30
      - Medical Capacity ≤ 20
    Event Tags Increased:
      - Scarcity (+1.5x)
      - Famine (+2x)
    ```

### 3. **Customizable Options**

- Users can:
  - Create entirely custom Listeners.
  - Adjust tags, conditions, and associated events for existing Listeners.

---

## Advanced Features

### 1. **Event Weight Adjustments**

- Listener activation modifies the weight of event tags:
  - Example:
    - Listener: Famine Crisis Pack.
    - Active Condition: Food < 30.
    - Effect: Events tagged `scarcity` and `famine` receive weight increases (+50%, +100%).

### 2. **Dependencies**

- Listeners can have dependencies on other Listeners or settlement states:
  - Example: The "Famine Crisis Pack" triggers the "Rebellion Pack" when Survival drops too low.

### 3. **Autogenerated Recommendations**

- The system can suggest Listener Packs based on settlement state:
  - Example: "Low Food detected. Would you like to activate the `Famine Crisis Pack`?"

---

## Strengths of the Listener System

1. **Modularity**:
   - Listeners group related events and conditions into reusable thematic packs.
2. **Narrative Depth**:
   - Dynamic activation based on settlement state ensures immersive storytelling.
3. **Flexibility**:
   - Advanced logic and customizability give DMs full control over Listeners.

---

## Future Considerations

1. **Complex Logic UI**:
   - Designing an intuitive interface for AND/OR/IF logic to minimize user overwhelm.
2. **Dynamic Event Pools**:
   - Consider adding auto-populating pools based on tag relationships.
3. **Event Weight Feedback**:
   - Show how Listener conditions and attribute tags influence event tag weights.

---
